<?xml version="1.0" encoding="UTF-8"?>

<zones xmlns="stendhal" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="stendhal ../zones.xsd">

  <!-- ** Load zones. Written from left to right and from top to bottom.
    ** Please respect it! -->

  <!-- Ground level -->

  <zone name="0_semos_canyon" level="0" x="500320" y="499680" file="Level 0/semos/canyon.tmx" accessible="false">
    <!-- NPCs -->
    <!--  Not ready
    <configurator class-name="games.stendhal.server.maps.semos.canyon.TollboothNPC"/>
    -->

    <!-- Bridge Portals -->
    <portal x="35" y="30" ref="north_l">
      <destination zone="0_semos_canyon" ref="south_l"/>
    </portal>

    <portal x="36" y="30" ref="north_r">
      <destination zone="0_semos_canyon" ref="south_r"/>
    </portal>

    <portal x="35" y="31" ref="south_l">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="36" y="31" ref="south_r">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>
  </zone>

  <zone name="0_semos_mountain_n_w4" level="0" x="499616" y="499744"
      file="Level 0/semos/mountain_n_w4.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying(temperature=-2,rain=+1)</parameter>
    </attributes>

    <configurator
      class-name="games.stendhal.server.maps.semos.mountain.YellowCrystalNPC"/>

      <entity x="28" y="27">
      <implementation class-name="games.stendhal.server.entity.mapstuff.useable.FishSource">
        <parameter name="species">trout</parameter>
      </implementation>
    </entity>

    <entity x="77" y="47">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">fence_gate</parameter>
        <parameter name="orientation">v</parameter>
        <parameter name="condition">new AlwaysFalseCondition()</parameter>
        <parameter name="message">The gate is locked.</parameter>
      </implementation>
    </entity>

    <portal x="61" y="38" ref="kikareukin_entrance">
      <destination zone="1_kikareukin_cave" ref="entrance"/>
    </portal>

    <point-of-interest x="61" y="38">
      <name>Kikareukin Entrance</name>
      <type>dungeon</type>
      <description>Entrance to Kikareukin and the way up to the sky.</description>
      <url>https://stendhalgame.org/region/kikareukin.html</url>
    </point-of-interest>
  </zone>

  <zone name="0_semos_mountain_n2_w3" level="0" x="499616" y="499872"
    file="Level 0/semos/mountain_n2_w3.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying(temperature=-1)</parameter>
    </attributes>

    <portal x="68" y="4" ref="kikareukin_exit">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <point-of-interest x="65" y="85">
      <name>Semos Yeti Cave</name>
      <type>dungeon</type>
      <description>Better take something warm to dress with you when you walk there. (Player Level 80 - 200)</description>
      <url>https://stendhalgame.org/dungeon/semos_yeti_cave.html</url>
    </point-of-interest>
  </zone>

  <zone name="0_semos_mountain_n2_w2" level="0" x="499744" y="499744"
    file="Level 0/semos/mountain_n2_w2.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying(temperature=-1)</parameter>
    </attributes>
  </zone>

  <zone name="0_semos_mountain_n2_w" level="0" x="499872" y="499744"
    file="Level 0/semos/mountain_n2_w.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying(temperature=-1)</parameter>
    </attributes>

    <entity x="77" y="127">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">come_to_rest</parameter>
        <parameter name="radius">16</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <entity x="44" y="9">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">loop/river-02</parameter>
        <parameter name="radius">16</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <entity x="77" y="123">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">loop/river-01</parameter>
        <parameter name="radius">15</parameter>
        <parameter name="volume">40</parameter>
      </implementation>
    </entity>

    <entity x="62" y="127">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-woodpecker-01</parameter>
        <parameter name="min">3</parameter>
        <parameter name="max">15</parameter>
        <parameter name="radius">14</parameter>
        <parameter name="volume">65</parameter>
      </implementation>
    </entity>

    <entity x="14" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-woodpecker-01, bird-crow-01, bird-crow-02, bird-raven-01</parameter>
        <parameter name="min">3</parameter>
        <parameter name="max">30</parameter>
        <parameter name="radius">40</parameter>
        <parameter name="volume">65</parameter>
      </implementation>
    </entity>

    <!-- Portals -->
    <portal x="8" y="22" ref="apothecary_entrance" >
      <destination zone="int_apothecary_cabin" ref="exit"/>
      <attribute name="move.continuous"/>
    </portal>

    <!-- NPCs -->
    <!--<configurator class-name="games.stendhal.server.maps.semos.mountain.BefuddledSorcerorNPC"/>-->
  </zone>

  <!-- Interiors in 0_semos_mountain_n2_w -->

  <zone name="int_apothecary_cabin" file="interiors/semos/apothecary_cabin.tmx">
    <!-- hint to secret lab -->
    <entity x="0" y="0">
      <implementation class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="enterMessage">You feel a cool breeze coming in from somewhere.</parameter>
        <parameter name="coversZone">true</parameter>
        <parameter name="warnPlayer">true</parameter>
      </implementation>
    </entity>

    <!-- Portals -->
    <portal x="7" y="19" ref="exit">
      <destination zone="0_semos_mountain_n2_w" ref="apothecary_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <!-- secret entrance to lab -->
    <configurator class-name="games.stendhal.server.maps.semos.apothecary_cabin.LabEntrancePortal"/>

    <!-- Note on table -->
    <entity x="12" y="8">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Dear Klaas,

Unfortunately I will not be able to visit Athor this year. I have run into a bit of bad luck. Perhaps when times get better we'll be able to chat once again.</attribute>
      <attribute name="class">transparent</attribute>
    </entity>

    <!-- Guitar -->
    <entity x="6" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.PlaySoundEntity">
        <parameter name="sound">guitar-1</parameter>
        <parameter name="radius">40</parameter>
      </implementation>
      <attribute name="height">1</attribute>
      <attribute name="description">You see a guitar. Play a few chords.</attribute>
    </entity>
  </zone>

  <zone name="int_apothecary_lab" file="interiors/semos/apothecary_lab.tmx" accessible="false">
    <!-- NPCs -->
    <configurator class-name="games.stendhal.server.maps.semos.apothecary_lab.ApothecaryNPC"/>

    <!-- vial on table -->
    <configurator class-name="games.stendhal.server.maps.semos.apothecary_lab.VialOnTable"/>

    <!-- Portals -->
    <configurator class-name="games.stendhal.server.maps.semos.apothecary_lab.LabExitPortal"/>
    <!--
    <portal x="33" y="13" ref="lab_exit">
      <destination zone="int_apothecary_cabin" ref="lab_entrance"/>
    </portal>
    -->

    <!-- Clock -->
    <entity x="13" y="1">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Clock"/>
    </entity>

    <!-- Stuff to read -->
    <entity x="15" y="10">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Reader"/>
      <attribute name="text">Kokuda stew recipe:
1 kokuda
3 eggs
2 flasks of water</attribute>
    </entity>

    <entity x="13" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">clock-1</parameter>
        <parameter name="radius">15</parameter>
        <parameter name="volume">100</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="0_semos_mountain_n2" level="0" x="500000" y="499744"
    file="Level 0/semos/mountain_n2.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying(temperature=-1)</parameter>
      <parameter name="file" condition="stendhal.minetown">Level 0/semos/mountain_n2_mine_town_weeks.tmx</parameter>
      <parameter name="file" condition="stendhal.minetownconstruction">Level 0/semos/mountain_n2_mine_town_weeks_construction.tmx</parameter>
    </attributes>

    <point-of-interest x="90" y="97">
      <name>Semos Mines</name>
      <type>dungeon</type>
      <description>Western entrance to the Semos Mines, the city of Wofol and the huge tunnel system leading through the mountains. (Player Level 6 - 597)</description>
      <url>https://stendhalgame.org/dungeon/semos_mines.html</url>
    </point-of-interest>

    <!-- Portals -->
    <portal x="80" y="108" ref="frank_house">
      <destination zone="int_semos_frank_house" ref="exit"/>
      <attribute name="move.continuous"/>
    </portal>

    <!-- Signs -->
    <entity x="106" y="111">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Entrance just allowed for mine workers.</attribute>
    </entity>

    <!-- START MINE TOWN WEEKS -->
    <!-- Scrying orbs -->
    <entity x="46" y="107" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.useable.ViewChangeEntity">
        <parameter name="x">35</parameter>
        <parameter name="y">115</parameter>
      </implementation>
    </entity>
    <entity x="46" y="113" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.useable.ViewChangeEntity">
        <parameter name="x">35</parameter>
        <parameter name="y">115</parameter>
      </implementation>
    </entity>
    <entity x="46" y="120" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.useable.ViewChangeEntity">
        <parameter name="x">35</parameter>
        <parameter name="y">115</parameter>
      </implementation>
    </entity>

    <!-- writing on the wooden arch MINE TOWN WEEKS -->
    <entity x="94" y="118" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to the Mine Town Revival Weeks!</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>

    </entity>

    <!-- writing on the wooden arch MINE TOWN WEEKS -->
    <entity x="95" y="119" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to the Mine Town Revival Weeks!</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <!-- writing on the wooden arch MINE TOWN WEEKS -->
    <entity x="96" y="119" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to the Mine Town Revival Weeks!</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <!-- Caroline Shop signs for MINE TOWN WEEKS -->
    <entity x="60" y="105" condition="stendhal.minetown">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">sellrevivalweeks</parameter>
        <parameter name="title">Carolines snacks and drinks shop (sells)</parameter>
        <parameter name="seller">true</parameter>
        <parameter name="caption">Caroline sells snacks and drinks during the Mine Town Revival weeks.</parameter>
      </implementation>
      <attribute name="class">blackboard</attribute>
    </entity>

    <entity x="55" y="105" condition="stendhal.minetown">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">sellrevivalweeks</parameter>
        <parameter name="title">Carolines snacks and drinks shop (sells)</parameter>
        <parameter name="seller">true</parameter>
        <parameter name="caption">Caroline sells snacks and drinks during the Mine Town Revival weeks.</parameter>
      </implementation>
      <attribute name="class">blackboard</attribute>
    </entity>

    <!-- Tables during Mine Town -->
    <entity x="55" y="110" condition="stendhal.minetown">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a nice clean table for resting your drinks on.</attribute>
      <attribute name="width">4</attribute>
      <attribute name="height">2</attribute>
    </entity>

    <entity x="61" y="110" condition="stendhal.minetown">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a nice clean table for resting your drinks on.</attribute>
      <attribute name="width">4</attribute>
      <attribute name="height">2</attribute>
    </entity>

    <entity x="67" y="110" condition="stendhal.minetown">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a nice clean table for resting your drinks on.</attribute>
      <attribute name="width">4</attribute>
      <attribute name="height">2</attribute>
    </entity>

    <!-- Square tables -->
    <entity x="56" y="117" condition="stendhal.minetown">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a table for setting food and drinks on.</attribute>
      <attribute name="width">2</attribute>
    </entity>

    <entity x="62" y="117" condition="stendhal.minetown">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a table for setting food and drinks on.</attribute>
      <attribute name="width">2</attribute>
    </entity>

    <!-- ENDMINE TOWN WEEKS -->

  </zone>

  <zone name="int_semos_frank_house" file="interiors/semos/frank_house.tmx">
    <!-- Portals -->
    <portal x="7" y="30" ref="exit">
      <destination zone="0_semos_mountain_n2" ref="frank_house"/>
      <attribute name="move.continuous"/>
    </portal>

  </zone>

  <zone name="0_semos_mountain_n2_e" level="0" x="500128" y="499744"
    file="Level 0/semos/mountain_n2_e.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying(temperature=-1)</parameter>
    </attributes>

  </zone>

  <zone name="int_mithrilbourgh_stores" file="interiors/mithrilbourgh/stores.tmx">
    <!-- NPCs -->
    <configurator
      class-name="games.stendhal.server.maps.mithrilbourgh.stores.BuyerNPC"/>

    <!-- Signs -->
    <entity x="14" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">sellarrows</parameter>
        <parameter name="title">Ammunition sale</parameter>
        <parameter name="seller">true</parameter>
        <parameter name="caption">You can buy these arrows here.</parameter>
      </implementation>
      <attribute name="class">blackboard</attribute>
    </entity>

    <!-- Portals -->
    <portal x="6" y="11" ref="entrance">
      <destination zone="0_semos_mountain_n2_e2" ref="stores_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

  </zone>

  <zone name="int_mithrilbourgh_throne_room" file="interiors/mithrilbourgh/throne_room.tmx">
    <!-- NPCs -->
    <configurator
      class-name="games.stendhal.server.maps.mithrilbourgh.throne_room.BuyerNPC"/>

    <!-- Portals -->
    <portal x="7" y="18" ref="entrance1">
      <destination zone="0_semos_mountain_n2_e2" ref="throne_entrance1"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="19" y="18" ref="entrance2">
      <destination zone="0_semos_mountain_n2_e2" ref="throne_entrance2"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="32" y="18" ref="entrance3">
      <destination zone="0_semos_mountain_n2_e2" ref="throne_entrance3"/>
      <attribute name="move.continuous"/>
    </portal>

  </zone>

  <zone name="0_semos_mountain_n2_e2" level="0" x="500256" y="499744"
    file="Level 0/semos/mountain_n2_e2.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying(temperature=-1)</parameter>
    </attributes>

    <portal x="67" y="47" ref="stores_entrance">
      <destination zone="int_mithrilbourgh_stores" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="102" y="42" ref="floor_door_0">
      <destination zone="0_semos_mountain_n2_e2" ref="upper_door"/>
    </portal>
    <portal x="103" y="42" ref="floor_door_1">
      <destination zone="0_semos_mountain_n2_e2" ref="upper_door"/>
    </portal>
    <portal x="104" y="42" ref="floor_door_2">
      <destination zone="0_semos_mountain_n2_e2" ref="upper_door"/>
    </portal>
    <portal x="116" y="40" ref="upper_door">
      <destination zone="0_semos_mountain_n2_e2" ref="floor_door_1"/>
    </portal>
    <portal x="80" y="47" ref="throne_entrance1">
      <destination zone="int_mithrilbourgh_throne_room" ref="entrance1"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="86" y="47" ref="throne_entrance2">
      <destination zone="int_mithrilbourgh_throne_room" ref="entrance2"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="92" y="47" ref="throne_entrance3">
      <destination zone="int_mithrilbourgh_throne_room" ref="entrance3"/>
      <attribute name="move.continuous"/>
    </portal>

    <!-- wishing well -->
    <entity x="87" y="61">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.WellSource"/>
    </entity>
    <entity x="88" y="61">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.WellSource"/>
    </entity>

  </zone>

  <zone name="0_semos_mountain_n_w3" level="0" x="499744" y="499872"
    file="Level 0/semos/mountain_n_w3.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying</parameter>
    </attributes>
  </zone>

  <zone name="0_semos_mountain_n_w2" level="0" x="499872" y="499872"
    file="Level 0/semos/mountain_n_w2.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather" condition="!stendhal.christmas">varying</parameter>
      <parameter name="weather" condition="stendhal.christmas">snow_light</parameter>
    </attributes>
    <configurator class-name="games.stendhal.server.core.config.zone.NoTeleportIn"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.gnomevillage.GarbiddleNPC"/>

    <entity x="77" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">loop/river-01</parameter>
        <parameter name="radius">7</parameter>
        <parameter name="volume">35</parameter>
      </implementation>
    </entity>

    <portal x="63" y="115" ref="right1">
      <destination zone="0_semos_mountain_n_w2" ref="left1"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="64" y="115" ref="left1">
      <destination zone="0_semos_mountain_n_w2" ref="right1"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new LevelLessThanCondition(50)</parameter>
        <parameter name="rejected">The gnomes don't want you getting in here.</parameter>
      </implementation>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="63" y="116" ref="right2">
      <destination zone="0_semos_mountain_n_w2" ref="left2"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="64" y="116" ref="left2">
      <destination zone="0_semos_mountain_n_w2" ref="right2"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new LevelLessThanCondition(50)</parameter>
        <parameter name="rejected">The gnomes don't want you getting in here.</parameter>
      </implementation>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="63" y="117" ref="right3">
      <destination zone="0_semos_mountain_n_w2" ref="left3"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="64" y="117" ref="left3">
      <destination zone="0_semos_mountain_n_w2" ref="right3"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new LevelLessThanCondition(50)</parameter>
        <parameter name="rejected">The gnomes don't want you getting in here.</parameter>
      </implementation>
      <attribute name="move.continuous"/>
    </portal>
    <entity x="39" y="23">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Warning: The mountain pass has been blocked by a landslide!</attribute>
    </entity>
    <entity x="40" y="111">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">buy4gnomes</parameter>
        <parameter name="title">Garbiddle's shop</parameter>
        <parameter name="seller">false</parameter>
      </implementation>

      <attribute name="class">default</attribute>
    </entity>

    <portal x="76" y="36" ref="wizardstower_entrance">
      <destination zone="int_semos_wizards_tower_basement"
        ref="wizardstower_exit"/>
      <attribute name="move.continuous"/>
    </portal>

    <entity x="77" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">come_to_rest</parameter>
        <parameter name="radius">13</parameter>
        <parameter name="volume">100</parameter>
      </implementation>
    </entity>

    <entity x="78" y="28">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">mystical_aura</parameter>
        <parameter name="radius">16</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <entity x="77" y="119">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-blackbird-01, bird-blackbird-02, bird-blackbird-03</parameter>
        <parameter name="min">1</parameter>
        <parameter name="max">15</parameter>
        <parameter name="radius">10</parameter>
        <parameter name="volume">65</parameter>
      </implementation>
    </entity>

    <entity x="65" y="6">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-woodpecker-01</parameter>
        <parameter name="min">3</parameter>
        <parameter name="max">15</parameter>
        <parameter name="radius">24</parameter>
        <parameter name="volume">80</parameter>
      </implementation>
    </entity>
  </zone>

  <!-- Interiors of the wizards tower -->
  <zone name="int_semos_wizards_tower_basement" file="interiors/semos/wizards_tower_basement.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.WizardsGuardStatueNPC"/>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_magical_tower</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <portal x="15" y="29" ref="wizardstower_exit">
      <destination zone="0_semos_mountain_n_w2" ref="wizardstower_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="15" y="16" ref="basement_teleport">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>
  </zone>
  <!-- Interiors of the wizards tower -->
  <zone name="int_semos_wizards_tower_1" file="interiors/semos/wizards_tower_1.tmx">
    <configurator class-name="games.stendhal.server.core.config.zone.NoTeleportIn"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.FirstFloorCreatures"/>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_magical_tower</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <entity x="0" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="coversZone">true</parameter>
        <parameter name="enterMessage">Zekiel the guardian: "This is the first step of the test and the domain of Malleus."</parameter>
      </implementation>
    </entity>

    <entity x="14" y="6">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="width">3</parameter>
        <parameter name="height">2</parameter>
        <parameter name="enterMessage">You step onto a sparkling corner of the hexagram, this must be what Zekiel the guardian was talking about.</parameter>
      </implementation>
    </entity>

    <entity x="25" y="14">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="width">2</parameter>
        <parameter name="height">3</parameter>
        <parameter name="enterMessage">This looks like a creature matching the theme of Malleus ... perhaps this is the one to select.</parameter>
      </implementation>
    </entity>

    <portal x="15" y="15" ref="first_floor_exit">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="26" y="15" ref="choice_floor_1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="4" ref="north_choice_floor_1">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="27" y="15" ref="east_choice_floor_1">
      <destination zone="int_semos_wizards_tower_1" ref="choice_floor_1"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new QuestInStateCondition("zekiels_practical_test","first_step")</parameter>
        <parameter name="rejected">Zekiel the guardian: 'You have chosen the correct one of Malleus. Now use the candle at the shimmering spot of the hexagram.'</parameter>
        <parameter name="action">new MultipleActions([new SendPrivateMessageAction("Zekiel the guardian: 'You have chosen the correct one of Malleus. Now use the candle at the shimmering spot of the hexagram.'"), new EquipItemAction("candle"), new SetQuestAction("zekiels_practical_test", "second_step")])</parameter>
      </implementation>
    </portal>

    <portal x="15" y="26" ref="south_choice_floor_1">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="3" y="15" ref="west_choice_floor_1">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="15" y="6" ref="portal_to_second_floor">
      <destination zone="int_semos_wizards_tower_2" ref="portal_from_first_floor"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyDestroyingDoor">
        <parameter name="class">transparent</parameter>
        <parameter name="key">candle</parameter>
        <parameter name="rejected">You must hold your candle over this spot, walk here with a candle and it will float.</parameter>
      </implementation>
      <attribute name="hidden"/>
    </portal>
  </zone>
  <!-- Interiors of the wizards tower -->
  <zone name="int_semos_wizards_tower_2" file="interiors/semos/wizards_tower_2.tmx">
    <configurator class-name="games.stendhal.server.core.config.zone.NoTeleportIn"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.SecondFloorCreatures"/>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_magical_tower</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <entity x="0" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="coversZone">true</parameter>
        <parameter name="enterMessage">Zekiel the guardian: "This is the second step of the test and the domain of Jaer."</parameter>
      </implementation>
    </entity>

    <portal x="15" y="6" ref="portal_from_first_floor">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="15" ref="second_floor_exit">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="15" y="25" ref="choice_floor_2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="4" ref="north_choice_floor_2">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="27" y="15" ref="east_choice_floor_2">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="15" y="26" ref="south_choice_floor_2">
      <destination zone="int_semos_wizards_tower_2" ref="choice_floor_2"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new QuestInStateCondition("zekiels_practical_test","second_step")</parameter>
        <parameter name="rejected">Zekiel the guardian: 'You have chosen the correct one of Jaer. Now use the candle at the next shimmering spot of the hexagram.'</parameter>
        <parameter name="action">new MultipleActions([new SendPrivateMessageAction("Zekiel the guardian: 'You have chosen the correct one of Jaer. Now use the candle at the next shimmering spot of the hexagram.'"), new EquipItemAction("candle"), new SetQuestAction("zekiels_practical_test", "third_step")])</parameter>
      </implementation>
    </portal>

    <portal x="3" y="15" ref="west_choice_floor_2">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="23" y="20" ref="portal_to_third_floor">
      <destination zone="int_semos_wizards_tower_3" ref="portal_from_second_floor"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyDestroyingDoor">
        <parameter name="class">transparent</parameter>
        <parameter name="key">candle</parameter>
        <parameter name="rejected">You must hold your candle over this spot, walk here with a candle and it will float.</parameter>
      </implementation>
      <attribute name="hidden"/>
    </portal>
  </zone>
  <!-- Interiors of the wizards tower -->
  <zone name="int_semos_wizards_tower_3" file="interiors/semos/wizards_tower_3.tmx">
    <configurator class-name="games.stendhal.server.core.config.zone.NoTeleportIn"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.ThirdFloorCreatures"/>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_magical_tower</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <entity x="0" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="coversZone">true</parameter>
        <parameter name="enterMessage">Zekiel the guardian: "This is the third step of the test and the domain of Ravashack."</parameter>
      </implementation>
    </entity>

    <portal x="23" y="20" ref="portal_from_second_floor">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="15" ref="third_floor_exit">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="4" y="15" ref="choice_floor_3">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="4" ref="north_choice_floor_3">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="27" y="15" ref="east_choice_floor_3">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="15" y="26" ref="south_choice_floor_3">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="3" y="15" ref="west_choice_floor_3">
      <destination zone="int_semos_wizards_tower_3" ref="choice_floor_3"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new QuestInStateCondition("zekiels_practical_test","third_step")</parameter>
        <parameter name="rejected">Zekiel the guardian: 'You have chosen the correct one of Ravashack. You have almost done the half of the test. Search the next shimmering spot of the hexagram.'</parameter>
        <parameter name="action">new MultipleActions([new SendPrivateMessageAction("Zekiel the guardian: 'You have chosen the correct one of Ravashack. You have almost done the half of the test. Search the next shimmering spot of the hexagram.'"), new EquipItemAction("candle"), new SetQuestAction("zekiels_practical_test", "fourth_step")])</parameter>
      </implementation>
    </portal>

    <portal x="7" y="20" ref="portal_to_fourth_floor">
      <destination zone="int_semos_wizards_tower_4" ref="portal_from_third_floor"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyDestroyingDoor">
        <parameter name="class">transparent</parameter>
        <parameter name="key">candle</parameter>
        <parameter name="rejected">You must hold your candle over this spot, walk here with a candle and it will float.</parameter>
      </implementation>
      <attribute name="hidden"/>
    </portal>
  </zone>
  <!-- Interiors of the wizards tower -->
  <zone name="int_semos_wizards_tower_4" file="interiors/semos/wizards_tower_4.tmx">
    <configurator class-name="games.stendhal.server.core.config.zone.NoTeleportIn"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.FourthFloorCreatures"/>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_magical_tower</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <entity x="0" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="coversZone">true</parameter>
        <parameter name="enterMessage">Zekiel the guardian: "This is the fourth step of the test and the domain of Cassandra."</parameter>
      </implementation>
    </entity>

    <portal x="7" y="20" ref="portal_from_third_floor">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="15" ref="fourth_floor_exit">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="26" y="15" ref="choice_floor_4">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="4" ref="north_choice_floor_4">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="27" y="15" ref="east_choice_floor_4">
      <destination zone="int_semos_wizards_tower_4" ref="choice_floor_4"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new QuestInStateCondition("zekiels_practical_test","fourth_step")</parameter>
        <parameter name="rejected">Zekiel the guardian: 'You have chosen the correct one of Cassandra. One triangle is ready. Use the candle at the shimmering spot of the other triangle.'</parameter>
        <parameter name="action">new MultipleActions([new SendPrivateMessageAction("Zekiel the guardian: 'You have chosen the correct one of Cassandra. One triangle is ready. Use the candle at the shimmering spot of the other triangle.'"), new EquipItemAction("candle"), new SetQuestAction("zekiels_practical_test", "fifth_step")])</parameter>
      </implementation>
    </portal>

    <portal x="15" y="26" ref="south_choice_floor_4">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="3" y="15" ref="west_choice_floor_4">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="15" y="24" ref="portal_to_fifth_floor">
      <destination zone="int_semos_wizards_tower_5" ref="portal_from_fourth_floor"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyDestroyingDoor">
        <parameter name="class">transparent</parameter>
        <parameter name="key">candle</parameter>
        <parameter name="rejected">You must hold your candle over this spot, walk here with a candle and it will float.</parameter>
      </implementation>
      <attribute name="hidden"/>
    </portal>
  </zone>
  <!-- Interiors of the wizards tower -->
  <zone name="int_semos_wizards_tower_5" file="interiors/semos/wizards_tower_5.tmx">
    <configurator class-name="games.stendhal.server.core.config.zone.NoTeleportIn"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.FifthFloorCreatures"/>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_magical_tower</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <entity x="0" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="coversZone">true</parameter>
        <parameter name="enterMessage">Zekiel the guardian: "This is the fifth step of the test and the domain of Silvanus."</parameter>
      </implementation>
    </entity>

    <portal x="15" y="24" ref="portal_from_fourth_floor">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="15" ref="fifth_floor_exit">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="4" y="15" ref="choice_floor_5">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="4" ref="north_choice_floor_5">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="27" y="15" ref="east_choice_floor_5">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="15" y="26" ref="south_choice_floor_5">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="3" y="15" ref="west_choice_floor_5">
      <destination zone="int_semos_wizards_tower_5" ref="choice_floor_5"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new QuestInStateCondition("zekiels_practical_test","fifth_step")</parameter>
        <parameter name="rejected">Zekiel the guardian: 'You have chosen the correct one of Silvanus. The next shimmering spot awaits you and the last step of the test too.'</parameter>
        <parameter name="action">new MultipleActions([new SendPrivateMessageAction("Zekiel the guardian: 'You have chosen the correct one of Silvanus. The next shimmering spot awaits you and the last step of the test too.'"), new EquipItemAction("candle"), new SetQuestAction("zekiels_practical_test", "sixth_step")])</parameter>
      </implementation>
    </portal>

    <portal x="7" y="10" ref="portal_to_sixth_floor">
      <destination zone="int_semos_wizards_tower_6" ref="portal_from_fifth_floor"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyDestroyingDoor">
        <parameter name="class">transparent</parameter>
        <parameter name="key">candle</parameter>
        <parameter name="rejected">You must hold your candle over this spot, walk here with a candle and it will float.</parameter>
      </implementation>
      <attribute name="hidden"/>
    </portal>
  </zone>
  <!-- Interiors of the wizards tower -->
  <zone name="int_semos_wizards_tower_6" file="interiors/semos/wizards_tower_6.tmx">
    <configurator class-name="games.stendhal.server.core.config.zone.NoTeleportIn"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.SixthFloorCreatures"/>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_magical_tower</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <entity x="0" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="coversZone">true</parameter>
        <parameter name="enterMessage">Zekiel the guardian: "This is the sixth and last step of the test and the domain of Elana."</parameter>
      </implementation>
    </entity>

    <portal x="7" y="10" ref="portal_from_fifth_floor">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="15" ref="sixth_floor_exit">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="15" y="5" ref="choice_floor_6">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="15" y="4" ref="north_choice_floor_6">
      <destination zone="int_semos_wizards_tower_6" ref="choice_floor_6"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new QuestInStateCondition("zekiels_practical_test","sixth_step")</parameter>
        <parameter name="rejected">Zekiel the guardian: 'You have chosen the correct one of Elana. Complete the hexagram and I will wait for you at the next stage. Please talk to me there to finish the quest.'</parameter>
        <parameter name="action">new MultipleActions([new SendPrivateMessageAction("Zekiel the guardian: 'You have chosen the correct one of Elana. Complete the hexagram and I will wait for you at the next stage. Please talk to me there to finish the quest.'"), new EquipItemAction("candle"), new SetQuestAction("zekiels_practical_test", "last_step")])</parameter>
      </implementation>
    </portal>

    <portal x="27" y="15" ref="east_choice_floor_6">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="15" y="26" ref="south_choice_floor_6">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="3" y="15" ref="west_choice_floor_6">
      <destination zone="int_semos_wizards_tower_basement"
        ref="basement_teleport"/>
    </portal>

    <portal x="23" y="10" ref="portal_to_seventh_floor">
      <destination zone="int_semos_wizards_tower_7" ref="portal_from_sixth_floor"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyDestroyingDoor">
        <parameter name="class">transparent</parameter>
        <parameter name="key">candle</parameter>
        <parameter name="rejected">You must hold your candle over this spot, walk here with a candle and it will float.</parameter>
      </implementation>
      <attribute name="hidden"/>
    </portal>
  </zone>
  <!-- Interiors of the wizards tower -->
  <zone name="int_semos_wizards_tower_7" file="interiors/semos/wizards_tower_7.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.WizardsGuardStatueSpireNPC"/>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_magical_tower</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <portal x="23" y="10" ref="portal_from_sixth_floor">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>
    <portal x="15" y="13" ref="portal_sparkle_leave_tower">
      <destination zone="0_semos_mountain_n_w2" ref="wizardstower_entrance"/>
    </portal>
    <portal x="15" y="17" ref="portal_sparkle_enter_spire">
      <destination zone="int_semos_wizards_tower_8" ref="portal_sparkle_to_seventh_floor"/>
    </portal>
  </zone>
  <!-- Interiors of the wizards tower -->
  <zone name="int_semos_wizards_tower_8" file="interiors/semos/wizards_tower_spire_1.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.RedFireWizardNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.BlueIceSorceressNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.OrientalAirWizardNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.GreenNatureWizardNPC"/>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">mystical_aura</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <portal x="21" y="7" ref="portal_from_spire_2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="21" y="23" ref="portal_sparkle_to_seventh_floor">
      <destination zone="int_semos_wizards_tower_7" ref="portal_sparkle_enter_spire"/>
    </portal>
    <portal x="21" y="6" ref="portal_to_spire_2">
      <destination zone="int_semos_wizards_tower_9" ref="portal_from_spire_1"/>
    </portal>
    <!-- <portal x="7" y="28" ref="portal_to_malleus_plain"> <destination
      zone="malleus_plain" ref="portal_to_malleus"/> </portal> -->

    <entity x="9" y="15">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">wooden_door</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="autoclose">300</parameter>
      </implementation>
  </entity>

    <entity x="9" y="31">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">wooden_door</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="autoclose">300</parameter>
      </implementation>
  </entity>

    <entity x="33" y="15">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">wooden_door</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="autoclose">300</parameter>
      </implementation>
  </entity>

    <entity x="33" y="31">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">wooden_door</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="autoclose">300</parameter>
      </implementation>
  </entity>

    <entity x="21" y="31">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">wooden_door</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="autoclose">300</parameter>
      </implementation>
  </entity>
  </zone>

  <!-- Interiors of the wizards tower -->
  <zone name="int_semos_wizards_tower_9" file="interiors/semos/wizards_tower_spire_2.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.BlackDeathWizardNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.WhiteLifeSorceressNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.BlueArchmageNPC"/>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">mystical_aura</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <entity x="22" y="34">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Clock"/>
    </entity>
    <!-- ticking clock sound effect -->
    <entity x="22" y="34">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">clock-1</parameter>
        <parameter name="radius">15</parameter>
        <parameter name="volume">100</parameter>
      </implementation>
    </entity>

    <portal x="21" y="6" ref="portal_from_spire_1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="21" y="7" ref="portal_to_spire_1">
      <destination zone="int_semos_wizards_tower_8" ref="portal_from_spire_2"/>
    </portal>

    <entity x="12" y="17">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">wooden_door</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="autoclose">300</parameter>
      </implementation>
  </entity>

    <entity x="21" y="23">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">wooden_door</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="autoclose">300</parameter>
      </implementation>
  </entity>

    <entity x="30" y="17">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">wooden_door</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="autoclose">300</parameter>
      </implementation>
  </entity>
  </zone>
  <!-- Plains of the wizards -->
  <zone name="malleus_plain" file="interiors/abstract/malleus_plain.tmx"
    accessible="false">
    <!-- <portal x="7" y="28" ref="portal_to_malleus"> <destination zone="int_semos_wizards_tower_8"
      ref="portal_to_malleus_plain"/> </portal> -->
    <portal x="23" y="28" ref="cliff_way">
      <destination zone="malleus_plain" ref="cliff_way_back"/>
    </portal>
    <portal x="25" y="24" ref="cliff_way_back">
      <destination zone="malleus_plain" ref="cliff_way"/>
    </portal>
    <portal x="76" y="64" ref="entrance_bone_pillar">
      <destination zone="bone_pillar" ref="exit_bone_pillar_2"/>
    </portal>

    <entity x="32" y="60">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">ice_path</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="condition">new PlayerHasItemWithHimCondition("ice scroll")</parameter>
        <parameter name="autoclose">2</parameter>
      </implementation>
  </entity>

  </zone>

  <zone name="bone_pillar" file="interiors/abstract/malleus_plain_bone_pillar.tmx"
    accessible="false">
    <configurator
      class-name="games.stendhal.server.maps.semos.wizardstower.RedDemonLordNPC"/>
    <portal x="14" y="30" ref="exit_bone_pillar_1">
      <destination zone="malleus_plain" ref="entrance_bone_pillar"/>
      <attribute name="hidden"/>
    </portal>
    <portal x="15" y="30" ref="exit_bone_pillar_2">
      <destination zone="malleus_plain" ref="entrance_bone_pillar"/>
      <attribute name="hidden"/>
    </portal>
    <portal x="16" y="30" ref="exit_bone_pillar_3">
      <destination zone="malleus_plain" ref="entrance_bone_pillar"/>
      <attribute name="hidden"/>
    </portal>
  </zone>

  <zone name="0_semos_plains_n" level="0" x="500000" y="499872"
    file="Level 0/semos/plains_n.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather" condition="!stendhal.christmas">varying</parameter>
      <parameter name="weather" condition="stendhal.christmas">snow_light</parameter>
    </attributes>

    <!-- NPCs -->
    <configurator class-name="games.stendhal.server.maps.semos.plains.LittleBoyNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.plains.AddPostmanListener"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.plains.ButterfliesNPC"/>

    <configurator class-name="games.stendhal.server.maps.semos.city.FertileGrounds">
      <parameter name="x">60</parameter>
      <parameter name="y">44</parameter>
      <parameter name="width">16</parameter>
      <parameter name="height">26</parameter>
    </configurator>

    <entity x="75" y="109">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">fence_gate</parameter>
        <parameter name="orientation">v</parameter>
        <parameter name="condition">new AlwaysFalseCondition()</parameter>
        <parameter name="message">The gate is locked.</parameter>
      </implementation>
  </entity>

    <entity x="83" y="89">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">fence_gate</parameter>
        <parameter name="orientation">v</parameter>
        <parameter name="autoclose">2</parameter>
      </implementation>
  </entity>

    <portal x="92" y="101" ref="catacombs_entrance">
      <destination zone="-1_semos_catacombs_se" ref="entrance"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.ConditionAndActionPortal">
        <parameter name="condition">new QuestStartedCondition("vs_quest")</parameter>
        <parameter name="rejected">You find it hard to enter. Perhaps you're not prepared for what is below.</parameter>
      </implementation>
    </portal>

    <portal x="21" y="80" ref="school_entrance">
      <destination zone="int_semos_school_0" ref="exit"/>
      <attribute name="move.continuous"/>
    </portal>

  <entity x="92" y="100">
    <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
    <attribute name="text">
There is an inscription on the plinth of the statue.
You read: "These catacombs were built to hold
the mortal remains of the brave men and valiant women
who gave their lives to save ours.
Our debt can never be repaid.
They have earned our undying gratitude.
We, the people of Semos,
will never forget their sacrifices."
    </attribute>
    <attribute name="class">transparent</attribute>
    <attribute name="width">1</attribute>
    <attribute name="height">1</attribute>
  </entity>

    <point-of-interest x="92" y="101">
      <name>Semos Catacombs</name>
      <type>dungeon</type>
      <description>A hole in the ground on Semos graveyard. Prepare yourself well to fight the undead.</description>
      <url>https://stendhalgame.org/dungeon/semos_catacombs.html</url>
    </point-of-interest>

    <entity x="77" y="66">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">This ground has been fertilised so that seeds can grow here. Ask me (Jenny from the Mill) for seeds! Note: the area is open so once your flower is ready, anyone can pick it. Thanks for planting the nice flower for all to enjoy.</attribute>
      <attribute name="class">signpost</attribute>
    </entity>

    <entity x="59" y="58">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">This ground has been fertilised so that seeds can grow here. Ask me (Jenny from the Mill) for seeds! Note: the area is open so once your flower is ready, anyone can pick it. Thanks for planting the nice flower for all to enjoy.</attribute>
      <attribute name="class">signpost</attribute>
    </entity>

    <entity x="68" y="43">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">This ground has been fertilised so that seeds can grow here. Ask me (Jenny from the Mill) for seeds! Note: the area is open so once your flower is ready, anyone can pick it. Thanks for planting the nice flower for all to enjoy.</attribute>
      <attribute name="class">signpost</attribute>
    </entity>

    <entity x="70" y="50">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
As you read this sign I want you to know that I realized the meaning of these flowers...

If you plant a flower, you don't plant it for yourself. You plant it as a present for someone else. People who say "Oh, that's my flower and nobody else should get it!" will get disappointed... It is very difficult to pick your own flowers. You have to make a present to another player with planting a flower and then one day you will get the reward by finding a flower, which someone else has planted as a present for others. :)

It would be so beautiful if everyone plants as much flowers as he picked. Don't take more than you give and you will get as much as you need! :)

If everybody would think so, we were on the way to a better world...

 - signed by S.</attribute>
      <attribute name="class">signpost</attribute>
    </entity>

    <entity x="82" y="63">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
North: Old mine
East: Mill
South: Semos city
    </attribute>
      <attribute name="class">signpost</attribute>
    </entity>

    <entity x="101" y="74">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.WellSource"/>
    </entity>
    <entity x="102" y="74">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.WellSource"/>
    </entity>

  </zone>

  <zone name="int_semos_school_0" file="interiors/semos/school_0.tmx">
    <portal x="20" y="38" ref="exit">
      <destination zone="0_semos_plains_n" ref="school_entrance"/>
        <attribute name="move.continuous"/>
    </portal>

    <!-- sign indicating other floors are not accessible -->
    <entity x="20" y="4">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Due to renovations other floors are off limits.</attribute>
    </entity>
  </zone>

  <zone name="0_semos_plains_ne" level="0" x="500128" y="499872"
    file="Level 0/semos/plains_ne.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather" condition="!stendhal.christmas">varying</parameter>
      <parameter name="weather" condition="stendhal.christmas">snow_light</parameter>
    </attributes>
    <configurator class-name="games.stendhal.server.maps.semos.plains.MillerNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.plains.HoeingManNPC"/>

    <entity x="25" y="46">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
Southwest: Semos city
East: Ados (road destroyed)
Southeast: Farmhouse
    </attribute>
      <attribute name="class">signpost</attribute>
    </entity>

  </zone>

  <zone name="0_semos_plains_n_e2" level="0" x="500192" y="499872"
    file="Level 0/semos/plains_n_e2.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying</parameter>
    </attributes>
  </zone>

  <zone name="0_semos_mountain_n_e2" level="0" x="500256" y="499872"
    file="Level 0/semos/mountain_n_e2.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying</parameter>
    </attributes>

    <point-of-interest x="62" y="99">
      <name>Semos Caves South Entrance</name>
      <title>Semos Caves</title>
      <type>dungeon</type>
      <description>One of several entrances to the tunnel system below the northern mountains. The way to Mithrilbourgh and connection to Ados caves. (Player Level 15 - 125)</description>
      <url>https://stendhalgame.org/dungeon/semos_caves.html</url>
    </point-of-interest>

    <point-of-interest x="115" y="36">
      <name>Semos Caves North Entrance</name>
      <title>Semos Caves</title>
      <type>dungeon</type>
      <description>One of several entrances to the tunnel system below the northern mountains. The way to Mithrilbourgh and connection to Ados caves. Use with caution, if you are still low level. (Player Level 15 - 125)</description>
      <url>https://stendhalgame.org/dungeon/semos_caves.html</url>
    </point-of-interest>

  </zone>

  <zone name="0_semos_mountain_w2" level="0" x="499744" y="500000"
    file="Level 0/semos/mountain_w2.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying</parameter>
    </attributes>
  </zone>

  <zone name="0_semos_plains_w" level="0" x="499872" y="500000"
    file="Level 0/semos/plains_w.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather" condition="!stendhal.christmas">varying</parameter>
      <parameter name="weather" condition="stendhal.christmas">snow_light</parameter>
    </attributes>
    <portal x="85" y="26" ref="jail_entrance_left">
      <destination zone="-1_semos_jail" ref="entrance"/>
    </portal>

    <portal x="86" y="26" ref="jail_entrance">
      <destination zone="-1_semos_jail" ref="entrance"/>
    </portal>

    <entity x="53" y="26">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.FishSource">
        <parameter name="species">roach</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="int_semos_guard_house" file="interiors/semos/guard_house.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.guardhouse.RetiredAdventurerNPC"/>
    <portal x="13" y="16" ref="entrance">
      <destination zone="0_semos_village_w" ref="guard_house_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <entity x="17" y="12">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">KNOW HOW TO KILL CREATURES by Hayunn Naratha
My personal favourite has always been to right-click and choose to ATTACK a creature. You can't go wrong with that!
The sharper minded amongst you might prefer to click directly on the creature. It works too!
</attribute>
      <attribute name="class">book_red</attribute>
    </entity>

    <!-- add some interesting descriptions to the armor -->
    <entity x="4" y="12">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see one of Hayunn's best shields, now only gathering dust on display.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
    </entity>

    <entity x="3" y="13">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">This burnished coat of armor looks tempting to borrow, but it's firmly attached to that stand.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
    </entity>

    <entity x="4" y="14">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a strange kind of plate armor, made from some rare metal you do not recognise.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
    </entity>
  </zone>

  <zone name="int_semos_hostel" file="interiors/semos/hostel.tmx">
    <configurator class-name="games.stendhal.server.maps.semos.hostel.KidsNPCs"/>
    <configurator class-name="games.stendhal.server.maps.semos.hostel.BoyNPC"/>

    <entity x="9" y="3">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">sleep-1</parameter>
        <parameter name="radius">15</parameter>
      </implementation>
    </entity>

    <portal x="12" y="23" ref="entrance_left">
      <destination zone="0_semos_village_w" ref="hostel_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="13" y="23" ref="entrance_right">
      <destination zone="0_semos_village_w" ref="hostel_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>

  <zone name="0_semos_village_w" level="0" x="500000" y="500000"
    file="Level 0/semos/village_w.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="file" condition="stendhal.christmas">Level 0/semos/village_w_xmas.tmx</parameter>
      <parameter name="weather" condition="!stendhal.christmas">varying</parameter>
      <parameter name="weather" condition="stendhal.christmas">snow</parameter>
    </attributes>

    <configurator
      class-name="games.stendhal.server.maps.semos.village.RatsCreatures"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.village.SheepSellerNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.village.FightTrainingNPC"/>

    <portal x="16" y="34" ref="guard_house_entrance">
      <destination zone="int_semos_guard_house" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="29" y="40" ref="hostel_entrance">
      <destination zone="int_semos_hostel" ref="entrance_right"/>
      <attribute name="move.continuous"/>
    </portal>

    <entity x="38" y="42">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">fence_gate</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="condition">new AlwaysFalseCondition()</parameter>
        <parameter name="message">The gate is locked.</parameter>
      </implementation>
  </entity>

    <entity x="27" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">mutant-frog-1</parameter>
        <parameter name="min">1</parameter>
        <parameter name="max">10</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="50" y="16">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-blackbird-01, bird-blackbird-02, bird-blackbird-03</parameter>
        <parameter name="min">30</parameter>
        <parameter name="max">60</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="16" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-blackbird-01, bird-blackbird-02, bird-blackbird-03</parameter>
        <parameter name="min">30</parameter>
        <parameter name="max">60</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="26" y="41">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
NISHIYA'S SHEEP FARM

Buy sheep from Nishiya to get the best prices!
   </attribute>
    </entity>

    <entity x="43" y="40">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
Talk to Sato about selling your sheep. His prices aren't very good, but unfortunately it's a buyer's market... He pays more for bigger sheep (try to get a weight of at least 100).
   </attribute>
    </entity>

    <entity x="55" y="43">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
TO SEMOS

Mature sheep wanted: please speak to Sato.
   </attribute>
    </entity>

    <entity x="55" y="48">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
TO SEMOS

Mature sheep wanted: please speak to Sato.
   </attribute>
    </entity>

  </zone>

  <zone name="0_semos_city" level="0" x="500064" y="500000"
    file="Level 0/semos/city.tmx">
    <title>The City of Semos</title>
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather" condition="!stendhal.christmas">varying</parameter>
      <parameter name="file" condition="stendhal.christmas">Level 0/semos/city_xmas.tmx</parameter>
      <parameter name="file" condition="stendhal.minetown">Level 0/semos/city_halloween.tmx</parameter>
      <parameter name="file" condition="stendhal.easter">Level 0/semos/city_easter.tmx</parameter>
      <parameter name="weather" condition="stendhal.christmas">snow</parameter>
    </attributes>
    <configurator
      class-name="games.stendhal.server.entity.mapstuff.office.StoredEntityMoveConfigurator">
      <parameter name="oldx">44</parameter>
      <parameter name="oldy">60</parameter>
      <parameter name="x">45</parameter>
      <parameter name="y">53</parameter>
    </configurator>
    <configurator
      class-name="games.stendhal.server.entity.mapstuff.chest.StoredChestConfigurator">
      <parameter name="x">45</parameter>
      <parameter name="y">53</parameter>
    </configurator>
    <configurator
      class-name="games.stendhal.server.entity.mapstuff.block.BlockZoneConfigurator"
      condition="stendhal.testserver">
      <parameter name="start-x">44</parameter>
      <parameter name="start-y">53</parameter>
      <parameter name="multi">true</parameter>
      <parameter name="class">mine_cart_empty</parameter>
    </configurator>
    <configurator
      class-name="games.stendhal.server.entity.mapstuff.block.BlockTargetZoneConfigurator"
      condition="stendhal.testserver">
      <parameter name="x">40</parameter>
      <parameter name="y">53</parameter>
      <parameter name="action">new IncreaseXPAction(5)</parameter>
    </configurator>

    <configurator class-name="games.stendhal.server.maps.semos.city.GossipNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.city.GreeterNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.city.HealerNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.city.OracleNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.city.RetireeNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.city.SheepBuyerNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.city.SignLessorNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.city.MagicTeacherNPC"
      condition="stendhal.magic"/>
    <configurator class-name="games.stendhal.server.maps.semos.city.PuppyNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.city.RudolphNPC"
      condition="stendhal.christmas"/>
    <configurator class-name="games.stendhal.server.maps.semos.city.DragonKeeperNPC" condition="stendhal.petleveling"/>


    <!-- START: Mine Town Weeks Boutique -->

    <configurator class-name="games.stendhal.server.maps.magic.clothing_boutique.OutfitLenderNPC" condition="stendhal.minetown"/>
    <configurator class-name="games.stendhal.server.maps.magic.clothing_boutique.OutfitLender2NPC" condition="stendhal.minetown"/>

    <!-- Boutique Girls Table -->
    <entity x="43" y="7" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a vendor's table.</attribute>
      <attribute name="width">4</attribute>
      <attribute name="height">3</attribute>
    </entity>
    <entity x="47" y="9" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a vendor's table.</attribute>
      <attribute name="width">3</attribute>
      <attribute name="height">1</attribute>
    </entity>
    <entity x="43" y="7" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a vendor's table.</attribute>
      <attribute name="width">4</attribute>
      <attribute name="height">3</attribute>
    </entity>
    <entity x="49" y="8" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a vendor's table.</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>
    <entity x="49" y="7" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a vendor's table.</attribute>
      <attribute name="width">4</attribute>
      <attribute name="height">1</attribute>
    </entity>
    <entity x="52" y="8" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a vendor's table.</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">2</attribute>
    </entity>

    <!-- END: Mine Town Weeks Boutique -->

    <entity x="53" y="23">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">fence_gate</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="condition">new AlwaysFalseCondition()</parameter>
        <parameter name="message">The gate is locked.</parameter>
      </implementation>
  </entity>


    <!-- writing on the wooden arch -->

    <entity x="3" y="42">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to Semos</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <entity x="3" y="43">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to Semos</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <entity x="3" y="44">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to Semos</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <!-- writing on the wooden arch -->
    <entity x="3" y="45">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to Semos</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <!-- writing on sign east -->
    <entity x="61" y="43">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to Semos</attribute>
    </entity>


    <!-- writing on the wooden arch South -->

    <entity x="10" y="57">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to Semos</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <!-- writing on the wooden arch South -->

    <entity x="9" y="57">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to Semos</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <!-- writing on the wooden arch South -->

    <entity x="8" y="57">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to Semos</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <point-of-interest x="28" y="38">
      <name>Semos Dungeon</name>
      <type>dungeon</type>
      <description>A dangerous place right in the center of the city. (Player Level 0 - 50)</description>
      <url>https://stendhalgame.org/dungeon/semos_dungeons.html</url>
    </point-of-interest>

    <portal x="42" y="37" ref="tavern_entrance">
      <destination zone="int_semos_tavern_0" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <!--for the admin house -->
    <portal x="59" y="37" ref="house_exit_1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="53" y="37" ref="temple_entrance">
      <destination zone="int_semos_temple" ref="entrance_center_right"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="15" y="41" ref="blacksmith_entrance">
      <destination zone="int_semos_blacksmith" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="6" y="22" ref="library_entrance_left">
      <destination zone="int_semos_library" ref="entrance_left"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="11" y="22" ref="library_entrance_right">
      <destination zone="int_semos_library" ref="entrance_right"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="52" y="19" ref="storage_entrance">
      <destination zone="int_semos_storage_0" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <point-of-interest x="18" y="21">
      <name>Semos Bank</name>
      <type>bank</type>
      <description>A place to store your possessions.</description>
      <url>https://stendhalgame.org/player-guide/faq.html#Banking</url>
    </point-of-interest>

    <portal x="18" y="22" ref="bank_entrance">
      <destination zone="int_semos_bank" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="29" y="13" ref="townhall_entrance_left">
      <destination zone="int_semos_townhall" ref="entrance_left"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="30" y="13" ref="townhall_entrance">
      <destination zone="int_semos_townhall" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="31" y="13" ref="townhall_entrance_right">
      <destination zone="int_semos_townhall" ref="entrance_right"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="44" y="19" ref="bakery_entrance">
      <destination zone="int_semos_bakery" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <entity x="42" y="37">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_old_tavern</parameter>
        <parameter name="volume">80</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="28" y="39">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">dungeon_entrance</parameter>
        <parameter name="volume">80</parameter>
        <parameter name="radius">4</parameter>
      </implementation>
    </entity>

    <!-- birds and chicken -->
    <entity x="29" y="8">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-blackbird-01, bird-blackbird-02, bird-blackbird-03</parameter>
        <parameter name="min">30</parameter>
        <parameter name="max">60</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="8" y="30">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">chicken-01</parameter>
        <parameter name="min">10</parameter>
        <parameter name="max">45</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="47" y="25">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">chicken-01</parameter>
        <parameter name="min">10</parameter>
        <parameter name="max">45</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <!-- sounds from houses -->
    <entity x="44" y="39">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">creaky-door-open-1, creaky-door-close-1, glass-break-2</parameter>
        <parameter name="min">30</parameter>
        <parameter name="max">60</parameter>
        <parameter name="radius">10</parameter>
        <parameter name="volume">40</parameter>
      </implementation>
    </entity>

    <entity x="16" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-blackbird-01, bird-blackbird-02, bird-blackbird-03</parameter>
        <parameter name="min">30</parameter>
        <parameter name="max">60</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="6" y="49">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
West: Semos Village
East: Ados Rock
South: Nalwor forest and Or'ril castle
            </attribute>
      <attribute name="class">signpost</attribute>
    </entity>


    <entity x="28" y="43">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a statue of birds.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">2</attribute>
    </entity>

    <entity x="15" y="23">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">Outside Semos Bank, you see a huge, but fake, chest. It seems to be an advertisement.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">2</attribute>
    </entity>

    <entity x="5" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">This huge book looks like a sign for Semos Library.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">3</attribute>
      <attribute name="height">2</attribute>
    </entity>

    <!-- wishing well outside Bank -->
    <entity x="15" y="29">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.WellSource"/>
    </entity>
    <entity x="16" y="29">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.WellSource"/>
    </entity>




    <entity x="6" y="42">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
TO OLD SEMOS VILLAGE WEST

Shepherds wanted: please ask Nishiya
   </attribute>
    </entity>

    <entity x="26" y="40">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
DUNGEONS

Caution: These dungeons contain many rats, and more dangerous creatures. Enter at own risk.
   </attribute>
    </entity>

    <entity x="41" y="20">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Assistance needed, to help with pizza deliveries.</attribute>
    </entity>


    <!-- TEST - Make the bird statue in semos a semi-safe zone -->
    <!-- <entity x="26" y="40"> <implementation class-name="games.stendhal.server.entity.mapstuff.area.CreatureProtectionArea">
      <parameter name="width">6</parameter> <parameter name="height">6</parameter>
      <parameter name="default">block</parameter> <parameter name="rules"> -animal:wolf
      +animal:* -*:lich,*:ghost +undead:* </parameter> </implementation> </entity> -->

    <entity x="45" y="55">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
        Semos Community Chest
      </attribute>
    </entity>

    <!-- table infront of INN -->
    <entity x="45" y="41">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a nice clean table for resting your drinks on.</attribute>
      <attribute name="width">4</attribute>
      <attribute name="height">1</attribute>
    </entity>


    <!-- signs over the doors -->

    <entity x="42" y="35">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You read: "The Old Semos Tavern"
This sounds like a very nice place to meet some interesting people and have a nice evening together.</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
      <attribute name="class">transparent</attribute>
    </entity>

    <entity x="53" y="34">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">According to the cross on the roof, this must be the Semos temple. You have the strange feeling that someone in there is already waiting for you...</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
      <attribute name="class">transparent</attribute>
    </entity>

    <entity x="44" y="18">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">The sign says: "Bakery and pizza delivery. Daily fresh bread!"
Ahh nice, you can already smell it. And in small letters below is added: "New! Leander's tasty sandwiches!"</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
      <attribute name="class">transparent</attribute>
    </entity>

    <entity x="18" y="21">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Welcome to Semos Bank! Proprietor: Semos Bank Merchants Ltd.</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
      <attribute name="class">transparent</attribute>
    </entity>

    <entity x="15" y="40">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">Blacksmith's - Weapons and Tools</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
      <attribute name="class">transparent</attribute>
    </entity>


    <!-- START MINE TOWN WEEKS signs -->
    <entity x="53" y="3" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">#Mine #Town #Revival #Weeks! Enjoy the #festival and meet #Susi and her father while celebrating with snacks and drinks! Just take the path up to the #North #from #Semos #City to reach the #Mine #Town! Choose your most #favourite #colour and celebrate the festivals with your #selfmade #coloured #outfit!</attribute>
      <attribute name="width">2</attribute>
      <attribute name="height">2</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <entity x="14" y="4" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">#Mine #Town #Revival #Weeks! Enjoy the #festival and meet #Susi and her father while celebrating with snacks and drinks! Just take the path up to the #North #from #Semos #City to reach the #Mine #Town! Choose your most #favourite #colour and celebrate the festivals with your #selfmade #coloured #outfit!</attribute>
      <attribute name="width">2</attribute>
      <attribute name="height">2</attribute>
      <attribute name="class">transparent</attribute>
    <attribute name="resistance">0</attribute>
    </entity>

    <entity x="16" y="48" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">#Mine #Town #Revival #Weeks! Enjoy the #festival and meet #Susi and her father while celebrating with snacks and drinks! Just take the path up to the #North #from #Semos #City to reach the #Mine #Town! Choose your most #favourite #colour and celebrate the festivals with your #selfmade #coloured #outfit!</attribute>
      <attribute name="width">2</attribute>
      <attribute name="height">2</attribute>
      <attribute name="class">transparent</attribute>
    <attribute name="resistance">0</attribute>
    </entity>

    <entity x="58" y="49" condition="stendhal.minetown">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">#Mine #Town #Revival #Weeks! Enjoy the #festival and meet #Susi and her father while celebrating with snacks and drinks! Just take the path up to the #North #from #Semos #City to reach the #Mine #Town! Choose your most #favourite #colour and celebrate the festivals with your #selfmade #coloured #outfit!</attribute>
      <attribute name="width">2</attribute>
      <attribute name="height">2</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <!-- END REMOVE AFTER MINE TOWN WEEKS -->


    <entity x="30" y="16" condition="stendhal.christmas">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">ohhowjoyfully</parameter>
        <parameter name="volume">80</parameter>
        <parameter name="radius">15</parameter>
      </implementation>
    </entity>

  </zone>


  <zone name="int_semos_tavern_0" file="interiors/semos/tavern_0.tmx">
    <attributes>
      <parameter name="file" condition="stendhal.christmas">interiors/semos/tavern_0_xmas.tmx</parameter>
    </attributes>

    <configurator class-name="games.stendhal.server.maps.semos.tavern.BarMaidNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.tavern.TraderNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.tavern.DiceDealerNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.tavern.market.TradeCenterZoneConfigurator"/>

    <entity x="1" y="1" condition="!stendhal.christmas">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_old_tavern</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>
    <entity x="2" y="8" condition="stendhal.christmas">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">christmastree</parameter>
        <parameter name="volume">80</parameter>
        <parameter name="radius">20</parameter>
      </implementation>
    </entity>

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">creaky-door-open-1, creaky-door-close-1, glass-break-2</parameter>
        <parameter name="min">30</parameter>
        <parameter name="max">60</parameter>
        <parameter name="volume">40</parameter>
      </implementation>
    </entity>


    <portal x="22" y="17" ref="entrance">
      <destination zone="0_semos_city" ref="tavern_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="4" y="4" ref="upstairs">
      <destination zone="int_semos_tavern_1" ref="downstairs"/>
    </portal>

    <!-- table on the left -->
    <entity x="14" y="12">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a table, sticky with splashes of old beer.</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">4</attribute>
    </entity>

    <!-- table in the middle -->
    <entity x="19" y="12">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a table, ideal for gathering round with friends.</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">4</attribute>
    </entity>

    <!-- table on the right -->
    <entity x="26" y="12">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a sturdy wooden table.</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">4</attribute>
    </entity>

    <!-- Sign for the Trading Center <entity x="11" y="17"> <implementation
      class-name="games.stendhal.server.entity.mapstuff.sign.TradeCenterSign">
      <parameter name="shop">tradeswords</parameter> <parameter name="title">Trading
      - swords</parameter> </implementation> <attribute name="class">blackboard</attribute>
      </entity> -->

    <entity x="2" y="11">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">sellstuff</parameter>
        <parameter name="title">Xin Blanca's shop (selling)</parameter>
        <parameter name="seller">true</parameter>
        <parameter name="caption">You can buy these things from Xin Blanca.</parameter>
      </implementation>

      <attribute name="class">blackboard</attribute>
    </entity>

    <entity x="3" y="11">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">buystuff</parameter>
        <parameter name="title">Xin Blanca's shop (buying)</parameter>
        <parameter name="seller">false</parameter>
        <parameter name="caption">You can sell these things to Xin Blanca.</parameter>
      </implementation>

      <attribute name="class">blackboard</attribute>
    </entity>



    <entity x="2" y="16">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.chest.NPCOwnedChest">
        <parameter name="npc">Xin Blanca</parameter>
      </implementation>
    </entity>

    <entity x="12" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">food&amp;drinks</parameter>
        <parameter name="title">Semos Tavern's menu</parameter>
        <parameter name="seller">true</parameter>
        <parameter name="caption">You can buy these things by asking Margaret.</parameter>
      </implementation>

      <attribute name="class">book_red</attribute>
    </entity>

    <entity x="24" y="3">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">This is a gambling table. The green top looks like many games have been played on it.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">4</attribute>
      <attribute name="height">5</attribute>
    </entity>

    <entity x="10" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a fireplace filled with wood, but it isn't lit.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">2</attribute>
      <attribute name="height">1</attribute>
    </entity>
  </zone>

  <zone name="int_semos_tavern_1" file="interiors/semos/tavern_1.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.tavern.RareWeaponsSellerNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.tavern.BowAndArrowSellerNPC"/>

    <portal x="4" y="4" ref="downstairs">
      <destination zone="int_semos_tavern_0" ref="upstairs"/>
    </portal>

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_old_tavern</parameter>
        <parameter name="volume">80</parameter>
      </implementation>
    </entity>

    <entity x="12" y="3">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">buyrare</parameter>
        <parameter name="title">McPegleg's shop</parameter>
        <parameter name="seller">false</parameter>
        <parameter name="caption">You can sell these things to McPegleg.</parameter>
      </implementation>

      <attribute name="class">blackboard</attribute>
    </entity>

    <entity x="24" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">sellrangedstuff</parameter>
        <parameter name="title">Ouchit's shop</parameter>
        <parameter name="seller">true</parameter>
        <parameter name="caption">Ouchit sells bows and arrows.</parameter>
      </implementation>

      <attribute name="class">blackboard</attribute>
    </entity>
  </zone>

  <zone name="int_semos_temple" file="interiors/semos/temple.tmx">
    <configurator class-name="games.stendhal.server.maps.semos.temple.HealerNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.temple.TelepathNPC"/>

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">sacred_moments</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>


    <portal x="11" y="8" ref="orb_left">
      <destination zone="0_orril_mountain_w" ref="orb_destination"/>

      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.QuestCheckingPortal">
        <parameter name="quest">learn_scrying</parameter>
        <parameter name="rejected">If Ilisa asks, say #yes you have a message from the ball.</parameter>
      </implementation>
      <attribute name="use"/>
    </portal>
    <portal x="12" y="8" ref="orb_right">
      <destination zone="0_orril_mountain_w" ref="orb_destination"/>

      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.QuestCheckingPortal">
        <parameter name="quest">learn_scrying</parameter>
        <parameter name="rejected">If Ilisa asks, say #yes you have a message from the ball.</parameter>
      </implementation>
      <attribute name="use"/>
    </portal>

    <portal x="10" y="23" ref="entrance_left">
      <destination zone="0_semos_city" ref="temple_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="11" y="23" ref="entrance_center_left">
      <destination zone="0_semos_city" ref="temple_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="12" y="23" ref="entrance_center_right">
      <destination zone="0_semos_city" ref="temple_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="13" y="23" ref="entrance_right">
      <destination zone="0_semos_city" ref="temple_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="11" y="10" ref="restart_life">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>
  </zone>

  <zone name="int_semos_blacksmith" file="interiors/semos/blacksmith.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.blacksmith.BlacksmithNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.blacksmith.BlacksmithAssistantNPC"/>
    <portal x="15" y="14" ref="entrance">
      <destination zone="0_semos_city" ref="blacksmith_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <entity x="7" y="3">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">fire-1</parameter>
        <parameter name="volume">50</parameter>
      </implementation>
    </entity>

    <entity x="25" y="11">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">selltools</parameter>
        <parameter name="title">Tool shop</parameter>
        <parameter name="seller">true</parameter>
        <parameter name="caption">Xoderos sells useful tools.</parameter>
      </implementation>

      <attribute name="class">book_blue</attribute>
    </entity>

    <entity x="6" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">In this fireplace the smith heats the iron until it is glowing.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">4</attribute>
      <attribute name="height">3</attribute>
    </entity>

    <entity x="9" y="12">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">In this fireplace the smith heats the iron until it is glowing.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">3</attribute>
      <attribute name="height">2</attribute>
    </entity>

    <entity x="2" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">This is the water for cooling the hot iron bars.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">3</attribute>
      <attribute name="height">3</attribute>
    </entity>

    <entity x="4" y="9">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">This is the water for cooling the hot iron bars.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">3</attribute>
      <attribute name="height">3</attribute>
    </entity>

    <entity x="18" y="5">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">Here are some almost finished weapons which are not ready to be used yet.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">4</attribute>
      <attribute name="height">2</attribute>
      <attribute name="resistance">0</attribute>
    </entity>


    <entity x="18" y="3">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">Here are some almost finished weapons which are not ready to be used yet.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">3</attribute>
      <attribute name="height">2</attribute>
      <attribute name="resistance">0</attribute>
    </entity>

    <entity x="20" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">Some pincers to hold the glowing iron while heating and forging it.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">2</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="22" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">This seems to be a hammer which is used to forge iron bars.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">2</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="7" y="6">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a massive anvil for forging tools with. </attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="9" y="10">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a massive anvil for forging tools with. </attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>
  </zone>

  <zone name="int_semos_library" file="interiors/semos/library.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.library.HistorianGeographerNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.library.LibrarianNPC"/>

    <portal x="8" y="30" ref="entrance_left">
      <destination zone="0_semos_city" ref="library_entrance_left"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="21" y="30" ref="entrance_right">
      <destination zone="0_semos_city" ref="library_entrance_right"/>
      <attribute name="move.continuous"/>
    </portal>

    <entity x="25" y="18">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
QUOTES OF FAMOUS FISHERMEN

Fisherman Bully:
Clownfish are always good for a laugh.

Fisherman Jacky:
Don't mistake your trout for your old trout, she wouldn't taste so good.

Fisherman Tommy:
I wouldn't trust a surgeonfish in a hospital, there's something fishy about them.

Fisherman Sody:
Devout Crustaceans believe in the One True Cod.

Fisherman Humphrey:
I don't understand why no-one buys my fish. The sign says 'Biggest Roaches in town'.

Fisherman Monty:
My parrot doesn't like to sit on a perch. He says it smells fishy.

Fisherman Charby:
That fish restaurant really overcooks everything. It even advertises char fish.

Fisherman Ally:
Holy mackerel! These chips are tasty.
        </attribute>
      <attribute name="class">book_red</attribute>
    </entity>

    <entity x="9" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.PopupImage">
        <parameter name="image">map-orril-castle.png</parameter>
        <parameter name="title">Ancient Or'ril castle</parameter>
      </implementation>
      <attribute name="class">map-orril-castle</attribute>
    </entity>

    <entity x="20" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.PopupImage">
        <parameter name="image">map-semos-ados.png</parameter>
        <parameter name="title">The route to Ados City</parameter>
      </implementation>
      <attribute name="class">map-semos-ados</attribute>
      <attribute name="width">3</attribute>
    </entity>

    <entity x="28" y="3">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.PopupImage">
        <parameter name="image">map-wofol.png</parameter>
        <parameter name="title">Semos Mines and the Kobold city of Wofol</parameter>
      </implementation>
      <attribute name="class">map-wofol</attribute>
    </entity>

    <entity x="26" y="5">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
       The island of Athor is famous for its golden beaches. Having long been an untouched piece of nature, it has become a holiday paradise since a ferry service was installed. Little do the tourists know about the dangers that lurk under the surface...
            </attribute>
      <attribute name="class">book_red</attribute>
    </entity>

    <entity x="27" y="5">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
       The dwarf mine west of Or'ril castle is one of the main iron ore resources of Faiumoni. Even rumors of a dragon living under the earth cannot stop the industrious dwarves from digging further and further into the mountain.
     </attribute>
      <attribute name="class">book_blue</attribute>
    </entity>

    <entity x="4" y="28">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
       Adventurers have described the effects of poisonous creatures and mushrooms as not only unhealthy, but also as confusing for the orientation. They recommend always to take an antidote with you.
     </attribute>
      <attribute name="class">book_blue</attribute>
    </entity>
  </zone>

  <zone name="int_semos_storage_0" file="interiors/semos/storage_0.tmx">
      <attributes>
      <parameter name="file" condition="stendhal.christmas">interiors/semos/storage_0_xmas.tmx</parameter>
    </attributes>
    <configurator
      class-name="games.stendhal.server.maps.semos.storage.HousewifeNPC"/>

    <portal x="9" y="14" ref="entrance">
      <destination zone="0_semos_city" ref="storage_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="16" y="2" ref="downstairs">
      <destination zone="int_semos_storage_-1" ref="upstairs"/>
    </portal>
  </zone>

  <zone name="int_semos_storage_-1" file="interiors/semos/storage_-1.tmx">
    <attributes>
      <parameter name="color_method">multiply</parameter>
      <parameter name="color">#413263</parameter>
      <parameter name="blend_method">bleach</parameter>
    </attributes>

    <portal x="26" y="10" ref="upstairs">
      <destination zone="int_semos_storage_0" ref="downstairs"/>
    </portal>
  </zone>

  <zone name="int_semos_bank" file="interiors/semos/bank.tmx">
    <attributes>
      <parameter name="file" condition="stendhal.christmas">interiors/semos/bank_xmas.tmx</parameter>
    </attributes>
    <!-- to disallow making or using marked scrolls for getting to trading
      table area -->
    <configurator class-name="games.stendhal.server.core.config.zone.NoTeleportIn"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.bank.CustomerAdvisorNPC"/>

    <portal x="9" y="30" ref="entrance">
      <destination zone="0_semos_city" ref="bank_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="10" y="30" ref="entrance_right">
      <destination zone="0_semos_city" ref="bank_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <!-- for the admin house -->
    <portal x="24" y="8" ref="house_exit_3">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <entity x="20" y="18">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a proclamation from Mayor Sakhs stating that the citizens of Semos are doing a really great job in preventing monsters from taking over the streets.  Keep up the good work.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="21" y="18">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">This is Carmen's fan.  She dropped it last time she was in here.  Hopefully she will see it next time and remove it.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="22" y="18">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a scrap of paper with nonsense on it.  Perhaps someone's attempt at humor... You know those people who work at banks ;)</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="23" y="18">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see an announcement for next month's meeting of Rat Killers Anonymous.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="24" y="18">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a sock belonging to Starkad.  Diogenes is pranking him.  :D</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="20" y="19">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a wanted poster for a dragon which is pestering citizens of Semos.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="21" y="19">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a letter to Eonna from Ados Exterminators, Inc.  Wonder why she had to get help from another town?</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="22" y="19">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see an ad to sell armor to Xin Blanca.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="23" y="19">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see Ricardo's license for gambling.  Why would it be hanging here?</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="24" y="19">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a ticket to next year's SUPERSESSION</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="20" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a locket.  Wonder who it belongs to?</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="21" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You can't see what is behind the plant.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="22" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">Gordon, I miss you so.  Please come to see me sometime.  Sorry to have this put up on the bank bulletin board, but I don't have your address. Femme Fatale</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="23" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a map of far off Athor.  You long for a vacation.  You are thinking of visiting Athor.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="24" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a shopping list, dropped by Hayunn Naratha.  Funny, most of the items are different kinds of beer and ale.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">1</attribute>
      <attribute name="height">1</attribute>
    </entity>

    <entity x="2" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.chest.PersonalChest"/>
    </entity>
    <entity x="3" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a conveniently placed table.</attribute>
    </entity>
    <entity x="2" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.OnePlayerArea">
        <parameter name="width">2</parameter>
        <parameter name="height">4</parameter>
      </implementation>
    </entity>

    <entity x="9" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.chest.PersonalChest"/>
    </entity>
    <entity x="8" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a conveniently placed table.</attribute>
    </entity>

    <entity x="8" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.OnePlayerArea">
        <parameter name="width">2</parameter>
        <parameter name="height">4</parameter>
      </implementation>
    </entity>

    <entity x="14" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.chest.PersonalChest"/>
    </entity>
    <entity x="15" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a conveniently placed table.</attribute>
    </entity>

    <entity x="14" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.OnePlayerArea">
        <parameter name="width">2</parameter>
        <parameter name="height">4</parameter>
      </implementation>
    </entity>

    <entity x="14" y="0">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">When you open your chest, others may inspect its contents. If you want privacy, ask Dagobert for access to a vault.
     </attribute>
      <attribute name="class">transparent</attribute>
    </entity>

    <entity x="21" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.chest.PersonalChest"/>
    </entity>
    <entity x="20" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a conveniently placed table.</attribute>
    </entity>
    <entity x="20" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.OnePlayerArea">
        <parameter name="width">2</parameter>
        <parameter name="height">4</parameter>
      </implementation>
    </entity>

    <entity x="21" y="0">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">When you open your chest, others may inspect its contents. If you want privacy, ask Dagobert for access to a vault.
     </attribute>
      <attribute name="class">transparent</attribute>
    </entity>

    <entity x="2" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.chest.PersonalChest"/>
    </entity>
    <entity x="3" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a conveniently placed table.</attribute>
    </entity>

    <entity x="2" y="12">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.OnePlayerArea">
        <parameter name="width">2</parameter>
        <parameter name="height">4</parameter>
      </implementation>
    </entity>

    <entity x="9" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.chest.PersonalChest"/>
    </entity>
    <entity x="8" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a conveniently placed table.</attribute>
    </entity>

    <entity x="8" y="12">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.OnePlayerArea">
        <parameter name="width">2</parameter>
        <parameter name="height">4</parameter>
      </implementation>
    </entity>

    <entity x="14" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.chest.PersonalChest"/>
    </entity>
    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a conveniently placed table.</attribute>
    </entity>

    <entity x="14" y="12">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.OnePlayerArea">
        <parameter name="width">2</parameter>
        <parameter name="height">4</parameter>
      </implementation>
    </entity>

    <entity x="21" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.chest.PersonalChest"/>
    </entity>
    <entity x="20" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a conveniently placed table.</attribute>
    </entity>

    <entity x="20" y="12">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.OnePlayerArea">
        <parameter name="width">2</parameter>
        <parameter name="height">4</parameter>
      </implementation>
    </entity>

    <entity x="45" y="1">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Clock"/>
    </entity>
    <!-- ticking clock sound effect -->
    <entity x="45" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">clock-1</parameter>
        <parameter name="radius">15</parameter>
        <parameter name="volume">100</parameter>
      </implementation>
    </entity>

  </zone>

  <zone name="int_semos_townhall" file="interiors/semos/townhall.tmx">
  <attributes>
      <parameter name="file" condition="stendhal.christmas">interiors/semos/townhall_xmas.tmx</parameter>
    </attributes>
    <configurator class-name="games.stendhal.server.maps.semos.townhall.MayorNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.townhall.DecencyAndMannersWardenNPC"/>

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">medieval_harp</parameter>
        <parameter name="volume">80</parameter>
      </implementation>
    </entity>

    <entity x="7" y="1">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Clock"/>
    </entity>
    <!-- ticking clock sound effect -->
    <entity x="7" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">clock-1</parameter>
        <parameter name="radius">15</parameter>
        <parameter name="volume">100</parameter>
      </implementation>
    </entity>


    <portal x="14" y="46" ref="entrance_left">
      <destination zone="0_semos_city" ref="townhall_entrance_left"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="15" y="46" ref="entrance">
      <destination zone="0_semos_city" ref="townhall_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <portal x="16" y="46" ref="entrance_right">
      <destination zone="0_semos_city" ref="townhall_entrance_right"/>
      <attribute name="move.continuous"/>
    </portal>

  </zone>

  <zone name="int_semos_bakery" file="interiors/semos/bakery.tmx">
    <configurator class-name="games.stendhal.server.maps.semos.bakery.ChefNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.bakery.ShopAssistantNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.bakery.ItemsOnTable"/>
    <portal x="26" y="14" ref="entrance">
      <destination zone="0_semos_city" ref="bakery_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <entity x="29" y="7">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.chest.NPCOwnedChest">
        <parameter name="npc">Erna</parameter>
      </implementation>
    </entity>

    <entity x="15" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.Description"/>
      <attribute name="text">You see a fireplace filled with wood, but it isn't lit.</attribute>
      <attribute name="class">transparent</attribute>
      <attribute name="width">2</attribute>
      <attribute name="height">1</attribute>
    </entity>

  </zone>

  <!--for the admin house -->
  <zone name="int_semos_house" file="interiors/semos/house.tmx"
    accessible="false">
    <configurator
      class-name="games.stendhal.server.maps.semos.house.FlowerSellerNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.house.SpiritTrapperNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.house.AdminHelpNPC"/>

    <portal x="1" y="11" ref="exit_1">
      <destination zone="0_semos_city" ref="house_exit_1"/>
    </portal>

    <portal x="17" y="4" ref="exit_2">
      <destination zone="0_ados_wall_n" ref="house_exit_2"/>
    </portal>

    <portal x="1" y="4" ref="exit_3">
      <destination zone="int_semos_bank" ref="house_exit_3"/>
    </portal>

    <portal x="17" y="11" ref="exit_4">
      <destination zone="-1_semos_jail" ref="house_exit_4"/>
    </portal>

    <entity x="2" y="6">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a table which looks clean enough to eat from.</attribute>
    </entity>
    <entity x="2" y="7">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a table which looks clean enough to eat from.</attribute>
    </entity>
    <entity x="2" y="8">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a table which looks clean enough to eat from.</attribute>
    </entity>
    <entity x="16" y="8">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a table which looks clean enough to eat from.</attribute>
    </entity>
    <entity x="16" y="9">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a table which looks clean enough to eat from.</attribute>
    </entity>
    <entity x="16" y="10">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.WalkBlocker"/>
      <attribute name="description">You see a table which looks clean enough to eat from.</attribute>
    </entity>
  </zone>

  <zone name="0_semos_road_e" level="0" x="500128" y="500000"
    file="Level 0/semos/road_e.tmx">

    <configurator class-name="games.stendhal.server.maps.semos.road.BoyGuardianNPC"/>

    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather" condition="!stendhal.christmas">varying</parameter>
      <parameter name="weather" condition="stendhal.christmas">snow_light</parameter>
    </attributes>
    <entity x="103" y="49">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">fence_gate</parameter>
        <parameter name="orientation">v</parameter>
        <parameter name="condition">new AlwaysFalseCondition()</parameter>
        <parameter name="message">The gate is locked.</parameter>
      </implementation>
  </entity>

    <portal x="108" y="47" ref="pad_entrance">
      <destination zone="int_semos_swanky_pad" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>

    <entity x="27" y="50">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">loop/river-01</parameter>
        <parameter name="radius">20</parameter>
        <parameter name="volume">80</parameter>
      </implementation>
    </entity>

    <entity x="47" y="48">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.LoopedAmbientSoundSource">
        <parameter name="sound">loop/river-01</parameter>
        <parameter name="radius">20</parameter>
        <parameter name="volume">80</parameter>
      </implementation>
    </entity>

    <entity x="15" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-blackbird-01, bird-blackbird-02, bird-blackbird-03</parameter>
        <parameter name="min">30</parameter>
        <parameter name="max">60</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="32" y="33">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-blackbird-01, bird-blackbird-02, bird-blackbird-03</parameter>
        <parameter name="min">30</parameter>
        <parameter name="max">60</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="83" y="56">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-blackbird-01, bird-blackbird-02, bird-blackbird-03</parameter>
        <parameter name="min">30</parameter>
        <parameter name="max">60</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="118" y="57">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.PeriodicAmbientSoundSource">
        <parameter name="sound">bird-blackbird-01, bird-blackbird-02, bird-blackbird-03</parameter>
        <parameter name="min">30</parameter>
        <parameter name="max">60</parameter>
        <parameter name="radius">10</parameter>
      </implementation>
    </entity>

    <entity x="113" y="51">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
West: Semos city
East: Ados city
     </attribute>
      <attribute name="class">signpost</attribute>
    </entity>

    <!-- wishing well -->
    <entity x="122" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.WellSource"/>
    </entity>
    <entity x="123" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.WellSource"/>
    </entity>


  </zone>

  <zone name="int_semos_swanky_pad" file="interiors/semos/swanky_pad.tmx">
    <configurator class-name="games.stendhal.server.maps.semos.pad.DealerNPC"/>
    <portal x="7" y="18" ref="entrance">
      <destination zone="0_semos_road_e" ref="pad_entrance"/>
      <attribute name="move.continuous"/>
    </portal>

  </zone>

  <zone name="0_semos_road_se" level="0" x="500128" y="500064"
    file="Level 0/semos/road_se.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather" condition="!stendhal.christmas">varying</parameter>
      <parameter name="weather" condition="stendhal.christmas">snow_light</parameter>
    </attributes>

    <entity x="72" y="25">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">deep_forest</parameter>
        <parameter name="volume">120</parameter>
        <parameter name="radius">60</parameter>
      </implementation>
    </entity>

  </zone>

  <zone name="0_semos_plains_s" level="0" x="500000" y="500064"
    file="Level 0/semos/plains_s.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather" condition="!stendhal.christmas">varying</parameter>
      <parameter name="weather" condition="stendhal.christmas">snow_light</parameter>
    </attributes>

    <configurator
      class-name="games.stendhal.server.maps.semos.plains.ExperiencedWarriorNPC"/>

    <entity x="28" y="63">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">deep_forest</parameter>
        <parameter name="volume">120</parameter>
        <parameter name="radius">30</parameter>
      </implementation>
    </entity>

    <portal x="74" y="28" ref="dream_exit1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>
    <portal x="49" y="49" ref="dream_exit2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>
    <portal x="72" y="58" ref="dream_exit3">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>
    <entity x="118" y="43">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
TO THE FOREST

Shepherds please note: keep watch for
the wolves while searching for berries here
   </attribute>
    </entity>

    <entity x="38" y="3">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
TO OLD SEMOS VILLAGE

Shepherds wanted: please ask Nishiya
   </attribute>
    </entity>

    <entity x="113" y="3">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
TO SEMOS

Mature sheep wanted: please speak to Sato
   </attribute>
    </entity>


  </zone>

  <zone name="0_semos_forest_s" level="0" x="500000" y="500128"
    file="Level 0/semos/forest_s.tmx">
    <attributes>
      <parameter name="color_method">time</parameter>
      <parameter name="weather">varying</parameter>
    </attributes>

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">deep_forest</parameter>
        <parameter name="volume">120</parameter>
      </implementation>
    </entity>

    <!-- wishing well -->
    <entity x="44" y="70">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.WellSource"/>
    </entity>
    <entity x="45" y="70">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.WellSource"/>
    </entity>

    <!-- sign south -->
    <entity x="55" y="122">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sign.Sign"/>
      <attribute name="text">
North: Semos City
South: Kirdneh City
East: Nalwor City
Southwest: Or'ril Castle and Fado City
West: Deniran City
      </attribute>
      <attribute name="class">signpost</attribute>
    </entity>


  </zone>

  <!-- Level -1 -->

  <zone name="-1_semos_mine_n2_w2" level="-1" x="499744" y="499744"
    file="Level -1/semos/mine_n2_w2.tmx">

    <entity x="81" y="5">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="20" y="58">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="24" y="58">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="7" y="67">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="13" y="94">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="69" y="93">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="196" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="253" y="21">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="240" y="82">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="73" y="99">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="88" y="61">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="222" y="26">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="175" y="13">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="137" y="23">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="102" y="65">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="123" y="67">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="73" y="2">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="7" y="14">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="9" y="44">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="29" y="73">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="32" y="94">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="172" y="66">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="249" y="80">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="213" y="95">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="239" y="124">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>
  </zone>

  <zone name="-1_semos_mine_n2_e" level="-1" x="500128" y="499616"
    file="Level -1/semos/mine_n2_e.tmx">
  </zone>

  <zone name="-1_semos_mine_n2_e2" level="-1" x="500256" y="499616"
    file="Level -1/semos/mine_n2_e2.tmx">
  </zone>

  <zone name="-1_semos_mine_n2" level="-1" x="500000" y="499744"
    file="Level -1/semos/mine_n2.tmx">

    <configurator
      class-name="games.stendhal.server.entity.mapstuff.block.BlockZoneConfigurator">
      <parameter name="start-x">121</parameter>
      <parameter name="start-y">23</parameter>
    </configurator>

    <configurator
      class-name="games.stendhal.server.entity.mapstuff.block.BlockZoneConfigurator">
      <parameter name="start-x">122</parameter>
      <parameter name="start-y">25</parameter>
    </configurator>

    <configurator
      class-name="games.stendhal.server.entity.mapstuff.block.BlockZoneConfigurator">
      <parameter name="start-x">123</parameter>
      <parameter name="start-y">26</parameter>
    </configurator>

    <configurator
      class-name="games.stendhal.server.entity.mapstuff.block.BlockZoneConfigurator">
      <parameter name="start-x">126</parameter>
      <parameter name="start-y">28</parameter>
    </configurator>

    <configurator
      class-name="games.stendhal.server.maps.semos.mines.DwarfGuardianNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.mines.MinerNPC"/>

    <entity x="62" y="79">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="56" y="86">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="51" y="84">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="51" y="78">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="55" y="75">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="106" y="15">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="73" y="38">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="77" y="40">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="56" y="22">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="23" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="18" y="72">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="21" y="74">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="79" y="4">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="67" y="9">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="60" y="22">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="42" y="5">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

  </zone>

  <zone name="-1_semos_mine_ne" level="-1" x="500128" y="499744"
    file="Level -1/semos/mine_ne.tmx">

    <entity x="79" y="107">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="75" y="111">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="84" y="107">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="35" y="94">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="39" y="92">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="101" y="106">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="121" y="47">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="113" y="88">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>
  </zone>

  <zone name="-1_semos_mine_n_e2" level="-1" x="500256" y="499744"
    file="Level -1/semos/mine_n_e2.tmx">

    <entity x="56" y="49">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="64" y="48">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="102" y="21">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="90" y="48">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="101" y="50">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="116" y="72">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>

    <entity x="95" y="21">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.useable.CoalSource"/>
    </entity>
  </zone>

  <zone name="int_wofol_house1" file="interiors/wofol/house1.tmx">
    <portal x="5" y="8" ref="entrance">
      <destination zone="-1_semos_mine_n_w2" ref="house1_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_house2" file="interiors/wofol/house2.tmx">
    <portal x="7" y="13" ref="entrance">
      <destination zone="-1_semos_mine_n_w2" ref="house2_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_house3" file="interiors/wofol/house3.tmx">
    <portal x="6" y="13" ref="entrance">
      <destination zone="-1_semos_mine_n_w2" ref="house3_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>

  <zone name="-1_semos_mine_n_w2" level="-1" x="499744" y="499872"
    file="Level -1/semos/mine_n_w2.tmx">
    <portal x="121" y="17" ref="house1_entrance">
      <destination zone="int_wofol_house1" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="103" y="46" ref="house2_entrance">
      <destination zone="int_wofol_house2" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="115" y="46" ref="house3_entrance">
      <destination zone="int_wofol_house3" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>

  <zone name="int_wofol_house4" file="interiors/wofol/house4.tmx">
    <configurator class-name="games.stendhal.server.maps.wofol.house4.TraderNPC"/>

    <portal x="7" y="13" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="house4_entrance"/>
      <attribute name="move.continuous"/>
    </portal>


    <entity x="4" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">sellstuff2</parameter>
        <parameter name="title">Wrvil's shop (selling)</parameter>
        <parameter name="seller">true</parameter>
        <parameter name="caption">You can buy these things from Wrvil.</parameter>
      </implementation>

      <attribute name="class">blackboard</attribute>
    </entity>

    <entity x="6" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sign.ShopSign">
        <parameter name="shop">buystuff2</parameter>
        <parameter name="title">Wrvil's shop (buying)</parameter>
        <parameter name="seller">false</parameter>
        <parameter name="caption">You can sell these things to Wrvil.</parameter>
      </implementation>

      <attribute name="class">blackboard</attribute>
    </entity>
  </zone>

  <zone name="int_wofol_house5" file="interiors/wofol/house5.tmx">
    <configurator class-name="games.stendhal.server.maps.wofol.house5.GhostNPC"/>
    <portal x="7" y="13" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="house5_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_house7" file="interiors/wofol/house7.tmx">
    <portal x="7" y="13" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="house7_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_blacksmith" file="interiors/wofol/blacksmith.tmx">
    <configurator
      class-name="games.stendhal.server.maps.wofol.blacksmith.BlacksmithNPC"/>
    <portal x="5" y="11" ref="entrance_left">
      <destination zone="-1_semos_mine_nw" ref="blacksmith_entrance_left"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="19" y="11" ref="entrance_right">
      <destination zone="-1_semos_mine_nw" ref="blacksmith_entrance_right"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_house8" file="interiors/wofol/house8.tmx">
    <portal x="7" y="13" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="house8_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_house9" file="interiors/wofol/house9.tmx">
    <portal x="7" y="13" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="house9_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_house6" file="interiors/wofol/house6.tmx">
    <portal x="7" y="13" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="house6_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_house10" file="interiors/wofol/house10.tmx">
    <portal x="7" y="13" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="house10_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>

  <zone name="int_wofol_library_0" file="interiors/wofol/library_0.tmx">
    <portal x="4" y="13" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="library_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="21" y="3" ref="upstairs">
      <destination zone="int_wofol_library_1" ref="downstairs"/>
    </portal>
  </zone>
  <zone name="int_wofol_library_1" file="interiors/wofol/library_1.tmx">
    <portal x="21" y="3" ref="downstairs">
      <destination zone="int_wofol_library_0" ref="upstairs"/>
    </portal>
    <portal x="17" y="3" ref="upstairs">
      <destination zone="int_wofol_library_2" ref="downstairs"/>
    </portal>
  </zone>
  <zone name="int_wofol_library_2" file="interiors/wofol/library_2.tmx">
    <portal x="17" y="3" ref="downstairs">
      <destination zone="int_wofol_library_1" ref="upstairs"/>
    </portal>
  </zone>

  <zone name="int_wofol_bar" file="interiors/wofol/bar.tmx">
    <configurator
      class-name="games.stendhal.server.maps.wofol.bar.KoboldBarRegularNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.wofol.bar.KoboldBarmaidNPC"/>
    <portal x="3" y="8" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="bar_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>

  <zone name="int_wofol_bakery" file="interiors/wofol/bakery.tmx">
    <configurator class-name="games.stendhal.server.maps.wofol.bakery.BakerNPC"/>
    <portal x="5" y="14" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="bakery_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_townhall" file="interiors/wofol/townhall.tmx">
    <portal x="5" y="31" ref="entrance_left">
      <destination zone="-1_semos_mine_nw" ref="townhall_entrance_left"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="45" y="31" ref="entrance_centre">
      <destination zone="-1_semos_mine_nw" ref="townhall_entrance_centre"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="56" y="31" ref="entrance_right">
      <destination zone="-1_semos_mine_nw" ref="townhall_entrance_right"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_warehouse" file="interiors/wofol/warehouse.tmx">
    <portal x="3" y="13" ref="entrance">
      <destination zone="-1_semos_mine_nw" ref="warehouse_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>
  <zone name="int_wofol_weaponshop" file="interiors/wofol/weaponshop.tmx">
    <portal x="5" y="10" ref="entrance_left">
      <destination zone="-1_semos_mine_nw" ref="weaponshop_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="6" y="10" ref="entrance_right">
      <destination zone="-1_semos_mine_nw" ref="weaponshop_entrance"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>

  <zone name="-1_semos_mine_nw" level="-1" x="499872" y="499872"
    file="Level -1/semos/mine_nw.tmx">
    <portal x="6" y="23" ref="house4_entrance">
      <destination zone="int_wofol_house4" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="24" y="23" ref="house9_entrance">
      <destination zone="int_wofol_house9" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="40" y="25" ref="house7_entrance">
      <destination zone="int_wofol_house7" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="5" y="65" ref="bar_entrance">
      <destination zone="int_wofol_bar" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="17" y="65" ref="blacksmith_entrance_left">
      <destination zone="int_wofol_blacksmith" ref="entrance_left"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="28" y="65" ref="blacksmith_entrance_right">
      <destination zone="int_wofol_blacksmith" ref="entrance_right"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="45" y="65" ref="house8_entrance">
      <destination zone="int_wofol_house8" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="58" y="65" ref="house5_entrance">
      <destination zone="int_wofol_house5" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="63" y="86" ref="house6_entrance">
      <destination zone="int_wofol_house6" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="4" y="76" ref="bakery_entrance">
      <destination zone="int_wofol_bakery" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="59" y="79" ref="library_entrance">
      <destination zone="int_wofol_library_0" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="30" y="94" ref="house10_entrance">
      <destination zone="int_wofol_house10" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="56" y="99" ref="townhall_entrance_left">
      <destination zone="int_wofol_townhall" ref="entrance_left"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="65" y="99" ref="townhall_entrance_centre">
      <destination zone="int_wofol_townhall" ref="entrance_centre"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="70" y="99" ref="townhall_entrance_right">
      <destination zone="int_wofol_townhall" ref="entrance_right"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="61" y="46" ref="warehouse_entrance">
      <destination zone="int_wofol_warehouse" ref="entrance"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="15" y="109" ref="weaponshop_entrance">
      <destination zone="int_wofol_weaponshop" ref="entrance_left"/>
      <attribute name="move.continuous"/>
    </portal>

    <!-- Spikes -->
    <entity x="77" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.DamagingArea">
        <parameter name="width">3</parameter>
        <parameter name="height">3</parameter>
        <parameter name="interval">2</parameter>
        <parameter name="damage">50</parameter>
        <parameter name="probability">30</parameter>
        <parameter name="players-only">true</parameter>
      </implementation>
      <attribute name="name">razor sharp spikes</attribute>
    </entity>

    <entity x="77" y="26">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.DamagingArea">
        <parameter name="width">2</parameter>
        <parameter name="height">2</parameter>
        <parameter name="interval">2</parameter>
        <parameter name="damage">50</parameter>
        <parameter name="probability">30</parameter>
        <parameter name="players-only">true</parameter>
      </implementation>
      <attribute name="name">razor sharp spikes</attribute>
    </entity>

    <entity x="77" y="28">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.DamagingArea">
        <parameter name="interval">2</parameter>
        <parameter name="damage">50</parameter>
        <parameter name="probability">30</parameter>
        <parameter name="players-only">true</parameter>
      </implementation>
      <attribute name="name">razor sharp spikes</attribute>
    </entity>
  </zone>

  <zone name="-1_semos_caves" level="-1" x="500256" y="499872"
    file="Level -1/semos/caves.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.caves.BabyDragonSellerNPC"/>

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_forsaken_mine</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="-1_kotoch_entrance_n" level="-1" x="499744" y="500000"
    file="Level -1/kotoch/entrance_n.tmx">
    <configurator class-name="games.stendhal.server.maps.kotoch.SmithNPC"/>

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_forsaken_mine</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="-1_semos_dungeon" level="-1" x="500064" y="500000"
    file="Level -1/semos/dungeon.tmx">

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_forsaken_mine</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="-1_semos_jail" level="-1" x="499872" y="500000"
    file="Level -1/semos/jail.tmx">
    <configurator class-name="games.stendhal.server.entity.player.Jail"/>
    <configurator class-name="games.stendhal.server.core.config.zone.NoTeleport"/>
    <configurator class-name="games.stendhal.server.maps.semos.jail.GuardNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.jail.InmateNPC"/>
    <configurator class-name="games.stendhal.server.core.config.zone.NoItemMove">
      <parameter name="message">For security reasons, items may not be moved around in jail.</parameter>
    </configurator>
    <!--for the admin house -->
    <portal x="15" y="7" ref="house_exit_4">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="28" y="17" ref="entrance">
      <destination zone="0_semos_plains_w" ref="jail_entrance"/>
    </portal>





  </zone>

  <zone name="-1_semos_catacombs_ne" level="-1" x="500064" y="499872"
    file="Level -1/semos/catacombs_ne.tmx">
    <attributes>
      <parameter name="color_method">multiply</parameter>
      <parameter name="color">#75698c</parameter>
      <parameter name="blend_method">bleach</parameter>
    </attributes>


    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_forsaken_mine</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="-1_semos_catacombs_nw" level="-1" x="500000" y="499872"
    file="Level -1/semos/catacombs_nw.tmx">
    <attributes>
      <parameter name="color_method">multiply</parameter>
      <parameter name="color">#75698c</parameter>
      <parameter name="blend_method">bleach</parameter>
    </attributes>


    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_forsaken_mine</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="-1_semos_catacombs_se" level="-1" x="500064" y="499936"
    file="Level -1/semos/catacombs_se.tmx">
    <attributes>
      <parameter name="color_method">multiply</parameter>
      <parameter name="color">#75698c</parameter>
      <parameter name="blend_method">bleach</parameter>
    </attributes>

    <portal x="28" y="37" ref="entrance" replacing="true">
      <destination zone="0_semos_plains_n" ref="catacombs_entrance"/>
    </portal>

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_forsaken_mine</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="-1_semos_catacombs_sw" level="-1" x="500000" y="499936"
    file="Level -1/semos/catacombs_sw.tmx">
    <attributes>
      <parameter name="color_method">multiply</parameter>
      <parameter name="color">#75698c</parameter>
      <parameter name="blend_method">bleach</parameter>
    </attributes>

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_forsaken_mine</parameter>
      </implementation>
    </entity>
  </zone>


  <zone name="-1_semos_yeti_cave" level="-1" x="499616" y="499872"
    file="Level -1/semos/yeticave.tmx">
    <attributes>
      <parameter name="color_method">softlight</parameter>
      <parameter name="color">#0099da</parameter>
    </attributes>

    <!-- music -->
    <entity x="1" y="1">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">ice_cave</parameter>
      </implementation>
    </entity>

    <!-- NPCs -->
    <configurator class-name="games.stendhal.server.maps.semos.yeticave.MrYetiNPC"/>
    <configurator class-name="games.stendhal.server.maps.semos.yeticave.MrsYetiNPC"/>
  </zone>

  <!-- Level -2 -->

  <zone name="-2_semos_mine_n2_e" level="-2" x="500128" y="499616"
    file="Level -2/semos/mine_n2_e.tmx">
  </zone>

  <zone name="-2_semos_mine_n2_e2" level="-2" x="500256" y="499616"
    file="Level -2/semos/mine_n2_e2.tmx">
  </zone>

  <zone name="-2_semos_mine_n2_e3" level="-2" x="500384" y="499616"
    file="Level -2/semos/mine_n2_e3.tmx">
  </zone>

  <zone name="-2_semos_mine_ne" level="-2" x="500128" y="499744"
    file="Level -2/semos/mine_ne.tmx">
  </zone>

  <zone name="-2_semos_mine_n_e2" level="-2" x="500256" y="499744"
    file="Level -2/semos/mine_n_e2.tmx">
  </zone>

  <zone name="-2_semos_mine_n_e3" level="-2" x="500384" y="499744"
    file="Level -2/semos/mine_n_e3.tmx">
    <entity x="56" y="18">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="width">51</parameter>
        <parameter name="height">25</parameter>
        <parameter name="enterMessage">Your ears are ringing. Something is really wrong here.</parameter>
        <parameter name="warnPlayer">true</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="-2_semos_mine_e" level="-2" x="500128" y="499872"
    file="Level -2/semos/mine_e.tmx">
  </zone>

  <zone name="-2_semos_mine_e2" level="-2" x="500256" y="499872"
    file="Level -2/semos/mine_e2.tmx">
  </zone>

  <zone name="-2_semos_mine_e3" level="-2" x="500384" y="499872"
    file="Level -2/semos/mine_e3.tmx">
  </zone>

  <zone name="-2_semos_mine_w2" level="-2" x="499744" y="499872"
    file="Level -2/semos/mine_w2.tmx">
    <configurator class-name="games.stendhal.server.maps.semos.mines.HighPriestNPC"/>
    <portal x="26" y="44" ref="to_balrog" replacing="true">
      <destination zone="-2_semos_mine_w2" ref="exit_balrog"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.LevelCheckingPortal">
        <parameter name="minimum-level">150</parameter>
        <parameter name="rejected">Aenihata's barrier is strong. The balrog would kill you instantly, run away!</parameter>
      </implementation>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="42" y="44" ref="exit_balrog" replacing="true">
      <destination zone="-2_semos_mine_w2" ref="to_balrog"/>
      <attribute name="move.continuous"/>
    </portal>
  </zone>

  <zone name="-2_semos_dungeon" level="-2" x="500096" y="500032"
    file="Level -2/semos/dungeon.tmx">

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_forsaken_mine</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="-2_semos_jail" level="-2" x="499872" y="500000"
    file="Level -2/semos/jail.tmx">
    <configurator class-name="games.stendhal.server.maps.semos.jail.JailKeeperNPC"/>
    <configurator class-name="games.stendhal.server.core.config.zone.NoItemMove">
      <parameter name="message">For security reasons, items may not be moved around in jail.</parameter>
    </configurator>
  </zone>

  <zone name="-3_semos_jail" level="-3" x="499872" y="500000"
    file="Level -3/semos/jail_walk.tmx" accessible="false">
    <configurator class-name="games.stendhal.server.core.config.zone.NoMoveTo"/>
    <configurator class-name="games.stendhal.server.core.config.zone.NoItemMove">
      <parameter name="message">For security reasons, items may not be moved around in jail.</parameter>
    </configurator>
    <portal x="59" y="67" ref="jail_entrance_left">
      <destination zone="int_semos_temple" ref="restart_life"/>
    </portal>

  </zone>

  <zone name="-2_semos_catacombs" level="-2" x="500000" y="499872"
    file="Level -2/semos/catacombs.tmx">
    <attributes>
      <parameter name="color_method">multiply</parameter>
      <parameter name="color">#806283</parameter>
      <parameter name="blend_method">bleach</parameter>
    </attributes>

    <!-- Music -->
    <entity x="1" y="1">
      <implementation class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">dark_quest</parameter>
        <parameter name="volume">80</parameter>
      </implementation>
    </entity>

    <portal x="9" y="6" ref="dragon_portal_1">
      <destination zone="-2_semos_catacombs" ref="dragon_portal_2"/>
      <attribute name="hidden"/>
    </portal>

    <portal x="86" y="12" ref="dragon_portal_2">

      <destination zone="-2_semos_catacombs" ref="dragon_portal_1"/>
      <attribute name="hidden"/>
    </portal>

    <portal x="84" y="8" ref="one_way_1a">
      <destination zone="-2_semos_catacombs" ref="one_way_1b"/>
      <attribute name="hidden"/>
    </portal>

    <portal x="84" y="9" ref="one_way_2a">
      <destination zone="-2_semos_catacombs" ref="one_way_2b"/>
      <attribute name="hidden"/>
    </portal>

    <portal x="84" y="10" ref="one_way_3a">
      <destination zone="-2_semos_catacombs" ref="one_way_3b"/>
      <attribute name="hidden"/>
    </portal>

    <portal x="84" y="11" ref="one_way_4a">
      <destination zone="-2_semos_catacombs" ref="one_way_4b"/>
      <attribute name="hidden"/>
    </portal>

    <portal x="84" y="12" ref="one_way_5a">
      <destination zone="-2_semos_catacombs" ref="one_way_5b"/>
      <attribute name="hidden"/>
    </portal>

    <portal x="84" y="13" ref="one_way_6a">
      <destination zone="-2_semos_catacombs" ref="one_way_6b"/>
      <attribute name="hidden"/>
    </portal>

    <portal x="84" y="14" ref="one_way_7a">
      <destination zone="-2_semos_catacombs" ref="one_way_7b"/>
      <attribute name="hidden"/>
    </portal>

    <portal x="84" y="15" ref="one_way_8a">
      <destination zone="-2_semos_catacombs" ref="one_way_7b"/>
      <attribute name="hidden"/>
    </portal>

    <portal x="83" y="8" ref="one_way_1b">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="83" y="9" ref="one_way_2b">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="83" y="10" ref="one_way_3b">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="83" y="11" ref="one_way_4b">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="83" y="12" ref="one_way_5b">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="83" y="13" ref="one_way_6b">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="83" y="14" ref="one_way_7b">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="83" y="15" ref="one_way_8b">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.OneWayPortalDestination"/>
    </portal>

    <portal x="94" y="57" ref="downstairs" replacing="true">
      <destination zone="-3_semos_catacombs" ref="upstairs"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyedPortal">
        <parameter name="key">vampirette entrails</parameter>
        <parameter name="quantity">7</parameter>
        <parameter name="rejected">
     Prove that you killed all vampirettes before you face their lord.
    </parameter>
      </implementation>
    </portal>

    <!-- Spikes -->
    <entity x="4" y="57">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.DamagingArea">
        <parameter name="width">3</parameter>
        <parameter name="height">4</parameter>
        <parameter name="interval">2</parameter>
        <parameter name="damage">100</parameter>
        <parameter name="probability">30</parameter>
        <parameter name="players-only">true</parameter>
      </implementation>
      <attribute name="name">razor sharp spikes</attribute>
    </entity>

    <entity x="4" y="61">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.DamagingArea">
        <parameter name="interval">2</parameter>
        <parameter name="damage">100</parameter>
        <parameter name="probability">30</parameter>
        <parameter name="players-only">true</parameter>
      </implementation>
      <attribute name="name">razor sharp spikes</attribute>
    </entity>

    <entity x="65" y="18">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.DamagingArea">
        <parameter name="width">2</parameter>
        <parameter name="height">1</parameter>
        <parameter name="interval">3</parameter>
        <parameter name="damage">50</parameter>
        <parameter name="probability">30</parameter>
        <parameter name="players-only">true</parameter>
      </implementation>
      <attribute name="name">razor sharp spikes</attribute>
    </entity>

    <entity x="61" y="19">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.DamagingArea">
        <parameter name="width">6</parameter>
        <parameter name="height">1</parameter>
        <parameter name="interval">3</parameter>
        <parameter name="damage">50</parameter>
        <parameter name="probability">30</parameter>
        <parameter name="players-only">true</parameter>
      </implementation>
      <attribute name="name">razor sharp spikes</attribute>
    </entity>

    <entity x="55" y="20">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.DamagingArea">
        <parameter name="width">9</parameter>
        <parameter name="height">1</parameter>
        <parameter name="interval">3</parameter>
        <parameter name="damage">50</parameter>
        <parameter name="probability">30</parameter>
        <parameter name="players-only">true</parameter>
      </implementation>
      <attribute name="name">razor sharp spikes</attribute>
    </entity>

    <entity x="55" y="21">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.DamagingArea">
        <parameter name="width">7</parameter>
        <parameter name="height">1</parameter>
        <parameter name="interval">3</parameter>
        <parameter name="damage">50</parameter>
        <parameter name="probability">30</parameter>
        <parameter name="players-only">true</parameter>
      </implementation>
      <attribute name="name">razor sharp spikes</attribute>
    </entity>
  </zone>


  <!-- Level -3 -->

  <zone name="-3_semos_dungeon" level="-3" x="500096" y="500032"
    file="Level -3/semos/dungeon.tmx">

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_forsaken_mine</parameter>
      </implementation>
    </entity>
  </zone>

  <zone name="-3_semos_catacombs" level="-3" x="500064" y="499872"
    file="Level -3/semos/catacombs.tmx">
    <attributes>
      <parameter name="color_method">multiply</parameter>
      <parameter name="color">#943348</parameter>
      <parameter name="blend_method">bleach</parameter>
    </attributes>
    <configurator
      class-name="games.stendhal.server.maps.semos.catacombs.VampireLordCreature"/>
    <portal x="30" y="57" ref="upstairs" replacing="true">
      <destination zone="-2_semos_catacombs" ref="downstairs"/>
    </portal>

    <!-- Music -->
    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <!--<parameter name="sound">the_forsaken_mine</parameter>-->
        <parameter name="sound">dark_quest</parameter>
        <parameter name="volume">80</parameter>
      </implementation>
    </entity>

    <entity x="60" y="61">
      <!-- all dialogs for this NPC are quest-related, so we don't need a
        special SpeakerNPC factory for him. -->
      <implementation class-name="games.stendhal.server.entity.npc.SpeakerNPC">
        <parameter name="name">Markovich</parameter>
        <parameter name="direction">left</parameter>
      </implementation>

      <attribute name="class">sickvampirenpc</attribute>
      <attribute name="hp">10</attribute>
      <attribute name="description">You see a sick vampire.</attribute>
    </entity>


  </zone>


  <!-- Level -4 -->

  <zone name="-4_semos_dungeon" level="-4" x="500096" y="500064"
    file="Level -4/semos/dungeon.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.dungeon.SheepBuyerNPC"/>

    <entity x="1" y="1">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">the_forsaken_mine</parameter>
      </implementation>
    </entity>

    <entity x="61" y="18">
      <implementation class-name="games.stendhal.server.entity.mapstuff.portal.Gate">
        <parameter name="image">fence_gate</parameter>
        <parameter name="orientation">h</parameter>
        <parameter name="condition">new AlwaysFalseCondition()</parameter>
        <parameter name="message">The gate is locked.</parameter>
      </implementation>
  </entity>
  </zone>


  <!-- Level -5 -->

  <zone name="-5_kanmararn_entrance" level="-5" x="500096" y="500064"
    file="Level -5/kanmararn/entrance.tmx">
  </zone>


  <!-- Level -6 -->

  <zone name="-6_kanmararn_city" level="-6" x="500160" y="500064"
    file="Level -6/kanmararn/city.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.kanmararn.CowardSoldierNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.kanmararn.SergeantNPC"/>

  </zone>


  <!-- Level -7 -->

  <!-- If we call it _jail, players can't move items around in it for security
    reasons. This issue is fixed now. -->
  <zone name="-7_kanmararn_prison" level="-7" x="500160" y="500064"
    file="Level -7/kanmararn/jail.tmx">
    <configurator
      class-name="games.stendhal.server.maps.semos.kanmararn.DwarfGuardNPC"/>
    <configurator
      class-name="games.stendhal.server.maps.semos.kanmararn.DuergarKingCreature"/>
    <portal x="11" y="18" ref="jail_lock_outside">
      <destination zone="-7_kanmararn_prison" ref="jail_lock_inside"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyedPortal">
        <parameter name="key">kanmararn prison key</parameter>
        <parameter name="rejected">You do not have the key to open the lock.</parameter>
      </implementation>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="11" y="22" ref="jail_lock_inside">
      <destination zone="-7_kanmararn_prison" ref="jail_lock_outside"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="19" y="9" ref="jail_lock_inside2">
      <destination zone="-7_kanmararn_prison" ref="jail_lock_outside2"/>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="19" y="13" ref="jail_lock_outside2">
      <destination zone="-7_kanmararn_prison" ref="jail_lock_inside2"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyedPortal">
        <parameter name="key">kanmararn prison key</parameter>
        <parameter name="rejected">You do not have the key to open the lock.</parameter>
      </implementation>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="36" y="18" ref="jail_lock_outside3">
      <destination zone="-7_kanmararn_prison" ref="jail_lock_inside3"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyedPortal">
        <parameter name="key">kanmararn prison key</parameter>
        <parameter name="rejected">You do not have the key to open the lock.</parameter>
      </implementation>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="36" y="22" ref="jail_lock_inside3">
      <destination zone="-7_kanmararn_prison" ref="jail_lock_outside3"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyedPortal">
        <parameter name="key">kanmararn prison key</parameter>
        <parameter name="rejected">You do not have the key to open the lock.</parameter>
      </implementation>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="44" y="9" ref="jail_lock_inside4">
      <destination zone="-7_kanmararn_prison" ref="jail_lock_outside4"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyedPortal">
        <parameter name="key">kanmararn prison key</parameter>
        <parameter name="rejected">You do not have the key to open the lock.</parameter>
      </implementation>
      <attribute name="move.continuous"/>
    </portal>
    <portal x="44" y="13" ref="jail_lock_outside4">
      <destination zone="-7_kanmararn_prison" ref="jail_lock_inside4"/>
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.portal.KeyedPortal">
        <parameter name="key">kanmararn prison key</parameter>
        <parameter name="rejected">You do not have the key to open the lock.</parameter>
      </implementation>
      <attribute name="move.continuous"/>
    </portal>
  </zone>



  <!-- Level 1 -->

  <zone name="1_dreamscape" file="interiors/abstract/dreamscape.tmx">
    <attributes>
      <parameter name="color_method">softlight</parameter>
      <parameter name="color">#22ffdd</parameter>
    </attributes>

    <!-- Music -->
    <entity x="0" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.sound.BackgroundMusicSource">
        <parameter name="sound">eerie_curious</parameter>
      </implementation>
    </entity>

    <!-- Don't allow teleporting in as we don't want marked scrolls made
      or ring abused -->
    <configurator class-name="games.stendhal.server.core.config.zone.NoTeleportIn"/>
    <portal x="43" y="49" ref="exit1">
      <destination zone="0_semos_plains_s" ref="dream_exit1"/>
    </portal>
    <portal x="40" y="88" ref="exit2">
      <destination zone="0_semos_plains_s" ref="dream_exit2"/>
    </portal>
    <portal x="76" y="115" ref="exit3">
      <destination zone="0_semos_plains_s" ref="dream_exit3"/>
    </portal>
    <entity x="0" y="0">
      <implementation
        class-name="games.stendhal.server.entity.mapstuff.area.MessagingArea">
        <parameter name="coversZone">true</parameter>
        <parameter name="enterMessage">You start to hallucinate. You think you're in a new land, somewhere unknown, with strange, terrible creatures and fantastic sights.</parameter>
      </implementation>
    </entity>
  </zone>

  <!-- Level 2 -->


  <!-- Level 3 -->


  <!-- Level 4 -->


  <!-- Level 5 -->


  <!-- Level 6 -->

</zones>
